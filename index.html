<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retro Cherry Music Player</title>
    <style>
        body {
            background-color: #e8b7c2;
            font-family: 'Courier New', Courier, monospace;
            color: #2b1a20;
            margin: 0;
            padding: 25px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .player-container {
            background-color: #d89aa7;
            border: 6px solid #b56b7e;
            border-radius: 20px;
            padding: 25px;
            width: 420px;
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        .player-container::before {
            content: 'ğŸ’';
            position: absolute;
            top: -20px;
            left: 20px;
            font-size: 30px;
        }
        .player-container::after {
            content: 'ğŸŒ¸';
            position: absolute;
            bottom: -70px;
            right: 20px;
            font-size: 30px;
        }
        .controls, .settings, .queue, .history {
            margin-bottom: 25px;
        }
        .settings button, .account-btn, .pomodoro-btn, .profile-btn {
            background-color: #b56b7e;
            border: 3px solid #8b3e50;
            color: #fff0f3;
            padding: 12px;
            margin: 6px;
            border-radius: 12px;
            cursor: pointer;
            font-family: 'Courier New', Courier, monospace;
            font-weight: bold;
            transition: background-color 0.3s, transform 0.1s;
        }
        .settings button:hover, .account-btn:hover, .pomodoro-btn:hover, .profile-btn:hover {
            background-color: #8b3e50;
            transform: scale(1.05);
        }
        .media-controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            background-color: #e8b7c2;
            padding: 10px;
            border-radius: 10px;
            border: 2px solid #b56b7e;
            position: relative;
        }
        .track-title {
            width: 100%;
            text-align: center;
            margin-bottom: 10px;
            font-size: 16px;
            color: #2b1a20;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .media-controls button {
            background-color: #b56b7e;
            border: 2px solid #8b3e50;
            color: #fff0f3;
            padding: 10px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
        }
        .seek-slider, .volume-slider, .ai-volume-slider {
            width: 100%;
            accent-color: #b56b7e;
            background: linear-gradient(to right, #b56b7e 0%, #b56b7e var(--value), #e8b7c2 var(--value), #e8b7c2 100%);
        }
        .queue, .history {
            max-height: 160px;
            overflow-y: auto;
            background-color: #e8b7c2;
            padding: 12px;
            border-radius: 12px;
            border: 2px solid #b56b7e;
        }
        .queue-item, .history-item {
            padding: 8px;
            cursor: pointer;
            border-bottom: 1px dotted #b56b7e;
        }
        .queue-item:hover, .history-item:hover {
            background-color: #cc8899;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(43, 26, 32, 0.6);
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #d89aa7;
            padding: 25px;
            border-radius: 20px;
            width: 320px;
            text-align: center;
            border: 3px solid #b56b7e;
        }
        .modal-content input {
            margin: 12px 0;
            padding: 10px;
            width: 85%;
            border: 2px solid #b56b7e;
            border-radius: 10px;
            background-color: #e8b7c2;
            color: #2b1a20;
        }
        .equalizer {
            display: flex;
            justify-content: space-around;
            margin: 15px 0;
        }
        .equalizer input {
            height: 120px;
            transform: rotate(-90deg);
            accent-color: #b56b7e;
        }
        .pomodoro-timer {
            font-size: 28px;
            margin: 12px 0;
            color: #2b1a20;
        }
        .hifi-toggle, .ad-mute-toggle, .ai-volume-control {
            margin: 15px 0;
        }
        .hifi-toggle input, .ad-mute-toggle input {
            accent-color: #b56b7e;
        }
        input[type="text"], input[type="password"], input[type="email"] {
            font-family: 'Courier New', Courier, monospace;
        }
        button {
            font-size: 14px;
        }
        .account-toggle {
            margin: 10px 0;
            color: #2b1a20;
            cursor: pointer;
            text-decoration: underline;
        }
        .account-toggle:hover {
            color: #8b3e50;
        }
        .profile-info {
            text-align: left;
            margin: 15px 0;
        }
        .profile-info p {
            margin: 5px 0;
        }
        .cherry-bubble {
            position: absolute;
            top: -120px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #fff0f3;
            border: 2px solid #b56b7e;
            border-radius: 15px;
            padding: 8px;
            width: 200px;
            text-align: center;
            font-size: 14px;
            color: #2b1a20;
            display: none;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            animation: float 1.5s ease-in-out infinite;
        }
        .cherry-bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 10px solid #b56b7e;
        }
        .sunny-bubble {
            position: absolute;
            bottom: -120px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #fff0f3;
            border: 2px solid #b56b7e;
            border-radius: 15px;
            padding: 8px;
            width: 200px;
            text-align: center;
            font-size: 14px;
            color: #2b1a20;
            display: none;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            animation: float 1.5s ease-in-out infinite;
        }
        .sunny-bubble::after {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-bottom: 10px solid #b56b7e;
        }
        @keyframes float {
            0%, 100% { transform: translate(-50%, 0); }
            50% { transform: translate(-50%, -10px); }
        }
        .ad-mute-indicator {
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 24px;
            color: #8b3e50;
            display: none;
        }
        .ad-mute-indicator.active {
            display: block;
        }
    </style>
</head>
<body>
<div class="player-container">
    <div class="cherry-bubble" id="cherry-bubble"></div>
    <div class="sunny-bubble" id="sunny-bubble"></div>
    <div class="settings">
        <button class="settings-btn">Settings ğŸ’</button>
        <button class="pomodoro-btn">Pomodoro ğŸŒ¸</button>
        <button class="account-btn">Account ğŸ’</button>
        <button class="profile-btn">Profile ğŸŒ¸</button>
    </div>
    <input type="text" id="playlist-url" placeholder="YouTube Playlist/Video URL">
    <button onclick="loadPlaylist()">Load Playlist ğŸŒ¸</button>
    <div class="media-controls">
        <div class="track-title" id="track-title">No Track Loaded</div>
        <button onclick="playPrevious()">Previous ğŸ’</button>
        <button onclick="playPause()">Play/Pause ğŸŒ¸</button>
        <button onclick="playNext()">Next ğŸ’</button>
        <input type="range" class="seek-slider" min="0" max="100" value="0">
        <button onclick="toggleLoop()">Loop ğŸŒ¸</button>
        <button onclick="toggleShuffle()">Shuffle ğŸ’</button>
        <input type="range" class="volume-slider" min="0" max="100" value="50">
        <div class="ad-mute-indicator" id="ad-mute-indicator">ğŸ”‡</div>
    </div>
    <div class="queue">
        <h3>Queue ğŸ’</h3>
        <div id="queue-list"></div>
    </div>
    <div class="history">
        <h3>History ğŸŒ¸</h3>
        <div id="history-list"></div>
    </div>
    <div id="youtube-player" style="display: none;"></div>
</div>

<!-- Settings Modal (Equalizer + Hi-Fi + Ad Mute + AI Volume) -->
<div id="settings-modal" class="modal">
    <div class="modal-content">
        <h3>Settings ğŸ’</h3>
        <h4>Equalizer ğŸŒ¸</h4>
        <div class="equalizer">
            <input type="range" min="-12" max="12" value="0" class="eq-slider" id="eq-bass">
            <input type="range" min="-12" max="12" value="0" class="eq-slider" id="eq-mid">
            <input type="range" min="-12" max="12" value="0" class="eq-slider" id="eq-treble">
        </div>
        <div class="hifi-toggle">
            <label for="hifi-mode">Hi-Fi Mode ğŸ’:</label>
            <input type="checkbox" id="hifi-mode">
        </div>
        <div class="ad-mute-toggle">
            <label for="ad-mute">Mute Ads ğŸŒ¸:</label>
            <input type="checkbox" id="ad-mute" checked>
        </div>
        <div class="ai-volume-control">
            <label for="ai-volume">AI Hosts Volume ğŸ’:</label>
            <input type="range" class="ai-volume-slider" id="ai-volume" min="0" max="100" value="100">
        </div>
        <button onclick="closeModal('settings-modal')">Close ğŸŒ¸</button>
    </div>
</div>

<!-- Pomodoro Modal -->
<div id="pomodoro-modal" class="modal">
    <div class="modal-content">
        <h3>Pomodoro Timer ğŸ’</h3>
        <div class="pomodoro-timer" id="pomodoro-timer">25:00</div>
        <button onclick="startPomodoro()">Start ğŸŒ¸</button>
        <button onclick="resetPomodoro()">Reset ğŸ’</button>
        <button onclick="closeModal('pomodoro-modal')">Close ğŸŒ¸</button>
    </div>
</div>

<!-- Account Modal (Login/Sign Up) -->
<div id="account-modal" class="modal">
    <div class="modal-content">
        <h3 id="account-title">Login ğŸ’</h3>
        <div id="login-form">
            <input type="text" id="login-username" placeholder="Username">
            <input type="password" id="login-password" placeholder="Password">
            <button onclick="login()">Submit ğŸŒ¸</button>
            <div class="account-toggle" onclick="toggleAccountForm()">Switch to Sign Up ğŸ’</div>
        </div>
        <div id="signup-form" style="display: none;">
            <input type="text" id="signup-username" placeholder="Username">
            <input type="email" id="signup-email" placeholder="Email">
            <input type="password" id="signup-password" placeholder="Password">
            <button onclick="signup()">Submit ğŸŒ¸</button>
            <div class="account-toggle" onclick="toggleAccountForm()">Switch to Login ğŸ’</div>
        </div>
        <button onclick="closeModal('account-modal')">Close ğŸŒ¸</button>
    </div>
</div>

<!-- Profile Modal -->
<div id="profile-modal" class="modal">
    <div class="modal-content">
        <h3>Profile ğŸ’</h3>
        <div class="profile-info">
            <p><strong>Username ğŸŒ¸:</strong> <span id="profile-username">Guest</span></p>
            <p><strong>Email ğŸ’:</strong> <span id="profile-email">guest@example.com</span></p>
            <p><strong>Favorite Tracks ğŸŒ¸:</strong> <span id="profile-favorites">Track 1, Track 2</span></p>
        </div>
        <button onclick="closeModal('profile-modal')">Close ğŸŒ¸</button>
    </div>
</div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
    let player;
    let playlist = [];
    let history = [];
    let currentIndex = 0;
    let isLooping = false;
    let isShuffling = false;
    let pomodoroInterval;
    let pomodoroTime = 25 * 60;
    let userProfile = {
        username: 'Guest',
        email: 'guest@example.com',
        favorites: ['Track 1', 'Track 2']
    };
    let isAdPlaying = false;
    let originalVolume = 50;
    let isAdMuteEnabled = true;
    let aiHostVolume = 100;

    const aiHostCherry = {
        name: 'Dr. CherryBlossom, PsyD',
        voice: null,
        showSpeechBubble: (message, isInteraction = false) => {
            if (Math.random() * 100 > aiHostVolume) return;
            const bubble = document.getElementById('cherry-bubble');
            bubble.textContent = `${aiHostCherry.name}: ${message}`;
            bubble.style.display = 'block';
            speak(message, aiHostCherry.voice);
            setTimeout(() => {
                bubble.style.display = 'none';
            }, 5000);
            if (!isInteraction) {
                setTimeout(() => aiHostSunny.respondToCherry(message, action), 1000);
            }
        },
        introduceTrack: (trackTitle) => {
            const messages = [
                `Choosing ${trackTitle} suggests a desire for rhythm in your life. How does this tune resonate with you today? ğŸ’`,
                `Ah, ${trackTitle}! This selection might reflect a need for energy. What draws you to this vibe? ğŸŒ¸`,
                `${trackTitle} is a bold choice! Itâ€™s like a window into your mood. Care to share whatâ€™s sparking this? ğŸ’`,
                `Spinning ${trackTitle} feels like a moment of self-expression. Howâ€™s this track speaking to your soul? ğŸŒ¸`,
                `With ${trackTitle}, youâ€™re curating your emotional landscape. Whatâ€™s this song unlocking for you? ğŸ’`,
                `${trackTitle} on the air! This feels like a personal anthem. Whatâ€™s the story behind this pick? ğŸŒ¸`,
                `Playing ${trackTitle} is a statement. How does it align with your inner world right now? ğŸ’`,
                `${trackTitle} sets a unique tone. What emotions are you exploring with this choice? ğŸ’`,
                `This ${trackTitle} pick feels intentional. Howâ€™s it shaping your day? ğŸŒ¸`
            ];
            const message = messages[Math.floor(Math.random() * messages.length)];
            action = 'introduceTrack';
            aiHostCherry.showSpeechBubble(message);
        },
        commentOnAction: (action, username) => {
            const messages = {
                play: [
                    `Starting playback shows initiative! What emotions are you hoping to explore with this music? ğŸ’`,
                    `Pressing play is a step toward mindfulness. How does this music make you feel right now? ğŸŒ¸`,
                    `Youâ€™re diving into the music! Whatâ€™s the mood youâ€™re setting with this play? ğŸ’`,
                    `Hitting play is like opening a door to your soul. Whatâ€™s waiting inside? ğŸŒ¸`,
                    `Play engaged! This choice feels vibrantâ€”howâ€™s it lifting your spirit? ğŸ’`,
                    `Youâ€™ve sparked the music! Whatâ€™s this play revealing about your mood? ğŸŒ¸`
                ],
                pause: [
                    `Pausing the trackâ€”perhaps a moment to reflect? Whatâ€™s on your mind during this silence? ğŸ’`,
                    `A pause can be powerful. Are you taking a moment to process or just savoring the quiet? ğŸŒ¸`,
                    `Pausing feels intentional. What thoughts are surfacing in this stillness? ğŸ’`,
                    `Youâ€™ve hit pause. Is this a breather or a chance to reset your focus? ğŸŒ¸`,
                    `This pause is a space for clarity. Whatâ€™s emerging in this quiet moment? ğŸ’`,
                    `Pausing the beatâ€”time for introspection? Whatâ€™s stirring within? ğŸŒ¸`
                ],
                next: [
                    `Skipping to the next track suggests curiosity! What new feelings are you chasing? ğŸ’`,
                    `Moving forward to another songâ€”embracing change? Whatâ€™s inspiring this shift? ğŸŒ¸`,
                    `Next track, new vibe! Whatâ€™s driving your urge to explore? ğŸ’`,
                    `Youâ€™re switching it up! How does this next song fit your journey? ğŸŒ¸`,
                    `Next song, bold move! Whatâ€™s the next chapter in your musical story? ğŸ’`,
                    `Advancing to the next trackâ€”craving something fresh? Whatâ€™s the draw? ğŸŒ¸`
                ],
                previous: [
                    `Revisiting a past track shows nostalgia. What memories does this song bring up for you? ğŸ’`,
                    `Going back to a previous tuneâ€”seeking comfort in the familiar? Tell me more! ğŸŒ¸`,
                    `Backtracking to this song feels sentimental. Whatâ€™s the pull here? ğŸ’`,
                    `Youâ€™re revisiting an old favorite. What emotions are tied to this track? ğŸŒ¸`,
                    `Rewinding to this trackâ€”yearning for the past? Whatâ€™s this song evoking? ğŸ’`,
                    `Back to a classic! Howâ€™s this throwback resonating today? ğŸŒ¸`
                ],
                loop: [
                    `Looping this track indicates attachment. What about this song keeps you coming back? ğŸ’`,
                    `Repeating a song can be soothing. How does this loop make you feel grounded? ğŸŒ¸`,
                    `Youâ€™re looping this gem! Whatâ€™s the magic in this track for you? ğŸ’`,
                    `Keeping this song on repeat feels comforting. Whatâ€™s it anchoring for you? ğŸŒ¸`,
                    `Loop mode on! This trackâ€™s got a hold on youâ€”whyâ€™s it so special? ğŸ’`,
                    `Repeating this tune? Itâ€™s like a musical hugâ€”howâ€™s it feeling? ğŸŒ¸`
                ],
                shuffle: [
                    `Shuffling the playlist embraces spontaneity! How do you feel about letting chance guide your music? ğŸ’`,
                    `Mixing it up with shuffleâ€”open to surprises? Whatâ€™s the mood youâ€™re hoping to discover? ğŸŒ¸`,
                    `Shuffle mode on! Youâ€™re ready for anything. Whatâ€™s the vibe youâ€™re craving? ğŸ’`,
                    `Shuffling feels adventurous! What surprises are you hoping to uncover? ğŸŒ¸`,
                    `Randomizing the tracks? Youâ€™re embracing the unknownâ€”whatâ€™s next? ğŸ’`,
                    `Shuffleâ€™s your style! Howâ€™s this unpredictability sparking joy? ğŸŒ¸`
                ],
                queueSelect: [
                    `Selecting a track from the queue shows intention. What made this song the right choice now? ğŸ’`,
                    `Picking a specific track is a form of self-expression. How does this choice reflect your mood? ğŸŒ¸`,
                    `Youâ€™ve chosen this track with purpose. Whatâ€™s the story behind this pick? ğŸ’`,
                    `This queue selection feels personal. Howâ€™s this song speaking to you? ğŸŒ¸`,
                    `Hand-picking this track? Youâ€™re crafting your vibeâ€”whatâ€™s the inspiration? ğŸ’`,
                    `Queue choice on point! Howâ€™s this song aligning with your soul? ğŸŒ¸`
                ],
                pomodoroStart: [
                    `Starting a Pomodoro session is a commitment to focus. What goals are you nurturing today? ğŸ’`,
                    `Embracing a Pomodoro timer shows discipline. How do you feel this will support your productivity? ğŸŒ¸`,
                    `Pomodoro time! Youâ€™re carving out space for progress. Whatâ€™s your focus today? ğŸ’`,
                    `Launching a Pomodoro session is empowering. Whatâ€™s driving your motivation? ğŸŒ¸`,
                    `25 minutes of focus? Youâ€™re setting the stage for successâ€”whatâ€™s the plan? ğŸ’`,
                    `Pomodoro activated! Howâ€™s this focus time shaping your day? ğŸŒ¸`
                ],
                login: (username) => [
                    `Welcome back, ${username}! Returning here feels like a safe space. What brings you back today? ğŸ’`,
                    `Good to see you, ${username}! Logging in suggests connection. How can I support your journey? ğŸŒ¸`,
                    `Hey ${username}, youâ€™re back! Whatâ€™s the mood youâ€™re bringing today? ğŸ’`,
                    `${username}, logging in is like coming home. Whatâ€™s on your mind? ğŸŒ¸`,
                    `${username}, youâ€™re here again! Whatâ€™s sparking your return? ğŸ’`,
                    `Welcome, ${username}! Whatâ€™s the vibe youâ€™re chasing today? ğŸŒ¸`
                ],
                signup: (username) => [
                    `Welcome, ${username}! Joining us is a brave step. What inspired you to start this musical journey? ğŸ’`,
                    `New face, ${username}! Signing up reflects curiosity. How do you hope music will enrich your life? ğŸŒ¸`,
                    `${username}, youâ€™re in! What sparked your decision to join the vibe? ğŸ’`,
                    `Big welcome, ${username}! Signing up is a bold move. Whatâ€™s your musical story? ğŸŒ¸`,
                    `${username}, new listener alert! Whatâ€™s fueling your musical adventure? ğŸ’`,
                    `Hello, ${username}! Joining us is excitingâ€”whatâ€™s your first musical goal? ğŸŒ¸`
                ],
                profile: [
                    `Checking your profile is a moment of self-reflection. What do you value about your musical identity? ğŸ’`,
                    `Exploring your profile shows self-awareness. How do these favorite tracks define you? ğŸŒ¸`,
                    `Peeking at your profile? Youâ€™re embracing your unique vibe! Whatâ€™s special about it? ğŸ’`,
                    `Your profile tells a story. How do these tracks shape who you are? ğŸŒ¸`,
                    `Profile check-in feels personal. What do these tracks say about you? ğŸ’`,
                    `Youâ€™re diving into your profile! Howâ€™s your musical journey evolving? ğŸŒ¸`
                ],
                adMute: [
                    `Muting ads creates a calmer space. How does this quiet moment feel for you? ğŸ’`,
                    `Silencing those adsâ€”prioritizing your peace! Whatâ€™s the vibe youâ€™re cultivating now? ğŸŒ¸`,
                    `Ads muted; youâ€™re in control. How does this choice empower your listening experience? ğŸ’`,
                    `No ad distractions here. How does this clarity enhance your connection to the music? ğŸŒ¸`,
                    `Muted ads for a smoother ride. Howâ€™s this tranquility boosting your mood? ğŸ’`,
                    `Youâ€™ve silenced the noise! What does this calm mean for your music experience? ğŸŒ¸`,
                    `Ads off, serenity on. Howâ€™s this peace shaping your musical journey? ğŸ’`,
                    `No ads, just you and the music. Whatâ€™s this focus bringing out? ğŸŒ¸`
                ],
                pomodoroEnd: [
                    `Pomodoro complete! Reflect on your progressâ€”how do you feel now? ğŸ’`,
                    `Youâ€™ve finished a Pomodoro! What insights did this focus time bring? ğŸŒ¸`,
                    `Pomodoro done! Howâ€™s this achievement shaping your day? ğŸ’`,
                    `Focus session complete! Whatâ€™s next on your journey? ğŸŒ¸`
                ]
            };
            let message;
            if (typeof messages[action] === 'function') {
                message = messages[action](username)[Math.floor(Math.random() * messages[action].length)];
            } else {
                message = messages[action][Math.floor(Math.random() * messages[action].length)];
            }
            aiHostCherry.showSpeechBubble(message);
        },
        respondToSunny: (sunnyMessage, action) => {
            const messages = {
                introduceTrack: [
                    `SunnyVibe, your enthusiasm for this track is contagious! Howâ€™s it uplifting our listener? ğŸ’`,
                    `Love your energy, SunnyVibe! Whatâ€™s the emotional spark in this song for our listener? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re hyping this track perfectly! Howâ€™s it resonating with our listenerâ€™s soul? ğŸ’`,
                    `Great vibe, SunnyVibe! Howâ€™s this song shaping our listenerâ€™s mood today? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re all in on this tune! Whatâ€™s the magic itâ€™s weaving for our listener? ğŸ’`
                ],
                play: [
                    `SunnyVibe, your excitement for this play is infectious! Howâ€™s it lifting our listenerâ€™s mood? ğŸ’`,
                    `Youâ€™re right, SunnyVibe, this playâ€™s a vibe! What emotions is it stirring for our listener? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re amping up this play! Howâ€™s it connecting with our listenerâ€™s energy? ğŸ’`,
                    `Love the hype, SunnyVibe! Whatâ€™s this play unlocking for our listener? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re all over this play! Howâ€™s it sparking joy for our listener? ğŸ’`
                ],
                pause: [
                    `SunnyVibe, you see this pause as a breather? I think itâ€™s a moment for reflectionâ€”thoughts? ğŸ’`,
                    `Interesting take, SunnyVibe! This pause might be a chance to processâ€”whatâ€™s our listener feeling? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re calling this pause a reset? Could it be a space for clarity too? ğŸ’`,
                    `You nailed the pause vibe, SunnyVibe! Whatâ€™s this quiet moment revealing for our listener? ğŸŒ¸`,
                    `SunnyVibe, love your spin on this pause! Howâ€™s it helping our listener recharge? ğŸ’`
                ],
                next: [
                    `SunnyVibe, youâ€™re all about that next track energy! What new vibe is our listener chasing? ğŸ’`,
                    `Great call, SunnyVibe! This skip feels curiousâ€”howâ€™s it shifting our listenerâ€™s mood? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re hyping the next song! Whatâ€™s the emotional pull for our listener? ğŸ’`,
                    `Love your take, SunnyVibe! Howâ€™s this next track inspiring our listener? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re on fire with this skip! Whatâ€™s our listener discovering? ğŸ’`
                ],
                previous: [
                    `SunnyVibe, youâ€™re feeling the nostalgia too? What memories is this track stirring for our listener? ğŸ’`,
                    `Nice one, SunnyVibe! This throwbackâ€™s got heartâ€”howâ€™s it resonating with our listener? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re all in on this rewind! Whatâ€™s the emotional tie for our listener? ğŸ’`,
                    `Love the retro vibe, SunnyVibe! Howâ€™s this track bringing back memories? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re rocking this throwback! Whatâ€™s our listener reliving? ğŸ’`
                ],
                loop: [
                    `SunnyVibe, youâ€™re loving this loop! Whatâ€™s keeping our listener hooked on this track? ğŸ’`,
                    `Great point, SunnyVibe! This repeatâ€™s comfortingâ€”howâ€™s it grounding our listener? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re all about that loop! Whatâ€™s the emotional anchor here? ğŸ’`,
                    `Youâ€™re right, SunnyVibe, this loopâ€™s magic! Howâ€™s it soothing our listener? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re feeling this repeat! Whatâ€™s the draw for our listener? ğŸ’`
                ],
                shuffle: [
                    `SunnyVibe, youâ€™re all for this shuffle! Howâ€™s this spontaneity sparking joy for our listener? ğŸ’`,
                    `Love your shuffle energy, SunnyVibe! What surprises are in store for our listener? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re hyping the randomness! Howâ€™s it shaking up our listenerâ€™s vibe? ğŸ’`,
                    `Great take, SunnyVibe! Howâ€™s this shuffle inspiring our listenerâ€™s mood? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re all in on shuffle! Whatâ€™s our listener uncovering? ğŸ’`
                ],
                queueSelect: [
                    `SunnyVibe, youâ€™re cheering this pick! Whyâ€™s this track so perfect for our listener now? ğŸ’`,
                    `Nice one, SunnyVibe! This queue choice is boldâ€”howâ€™s it reflecting our listenerâ€™s mood? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re all over this selection! Whatâ€™s the story behind our listenerâ€™s pick? ğŸ’`,
                    `Love your vibe, SunnyVibe! Howâ€™s this track speaking to our listener? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re hyping this choice! Whatâ€™s our listener expressing? ğŸ’`
                ],
                pomodoroStart: [
                    `SunnyVibe, youâ€™re pumped for this Pomodoro! Howâ€™s this focus time empowering our listener? ğŸ’`,
                    `Great energy, SunnyVibe! This Pomodoroâ€™s a winâ€”howâ€™s it boosting our listenerâ€™s goals? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re all in on this focus! Whatâ€™s our listener achieving today? ğŸ’`,
                    `Love your take, SunnyVibe! Howâ€™s this Pomodoro shaping our listenerâ€™s day? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re cheering this focus! Whatâ€™s our listener conquering? ğŸ’`
                ],
                login: [
                    `SunnyVibe, youâ€™re welcoming our listener back! Whatâ€™s the emotional homecoming like? ğŸ’`,
                    `Nice one, SunnyVibe! This loginâ€™s a connectionâ€”howâ€™s it feeling for our listener? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re hyping this return! Whatâ€™s our listener bringing to the vibe? ğŸ’`,
                    `Love your energy, SunnyVibe! Howâ€™s this login sparking our listenerâ€™s mood? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re all over this comeback! Whatâ€™s our listenerâ€™s vibe today? ğŸ’`
                ],
                signup: [
                    `SunnyVibe, youâ€™re stoked for our new listener! Whatâ€™s their musical journey starting with? ğŸ’`,
                    `Great call, SunnyVibe! This signupâ€™s freshâ€”howâ€™s it exciting our listener? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re hyping this new join! Whatâ€™s our listenerâ€™s first vibe? ğŸ’`,
                    `Love your vibe, SunnyVibe! Howâ€™s this signup inspiring our listener? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re cheering this new face! Whatâ€™s their musical story? ğŸ’`
                ],
                profile: [
                    `SunnyVibe, youâ€™re loving this profile check! Howâ€™s it reflecting our listenerâ€™s identity? ğŸ’`,
                    `Nice one, SunnyVibe! This profileâ€™s uniqueâ€”howâ€™s it defining our listener? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re all in on this peek! Whatâ€™s our listenerâ€™s musical story? ğŸ’`,
                    `Love your take, SunnyVibe! Howâ€™s this profile showing our listenerâ€™s vibe? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re hyping this profile! Whatâ€™s our listener embracing? ğŸ’`
                ],
                adMute: [
                    `SunnyVibe, youâ€™re all about muting ads! Howâ€™s this calm boosting our listenerâ€™s vibe? ğŸ’`,
                    `Great point, SunnyVibe! No ads, just musicâ€”howâ€™s it enhancing our listenerâ€™s mood? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re cheering this silence! Whatâ€™s our listener gaining from this peace? ğŸ’`,
                    `Love your energy, SunnyVibe! Howâ€™s this ad-free zone uplifting our listener? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re hyping this quiet! Howâ€™s it shaping our listenerâ€™s experience? ğŸ’`,
                    `SunnyVibe, youâ€™re all in on no ads! Howâ€™s this clarity vibing with our listener? ğŸŒ¸`
                ],
                pomodoroEnd: [
                    `SunnyVibe, youâ€™re celebrating this Pomodoro! Howâ€™s our listener feeling after this win? ğŸ’`,
                    `Nice one, SunnyVibe! This focus sessionâ€™s doneâ€”howâ€™s it impacting our listener? ğŸŒ¸`,
                    `SunnyVibe, youâ€™re hyping this completion! Whatâ€™s our listenerâ€™s next step? ğŸ’`,
                    `Love your vibe, SunnyVibe! Howâ€™s this Pomodoro boosting our listenerâ€™s mood? ğŸŒ¸`
                ]
            };
            const message = messages[action][Math.floor(Math.random() * messages[action].length)];
            aiHostCherry.showSpeechBubble(message, true);
        }
    };

    const aiHostSunny = {
        name: 'SunnyVibe',
        voice: null,
        showSpeechBubble: (message, isInteraction = false) => {
            if (Math.random() * 100 > aiHostVolume) return;
            const bubble = document.getElementById('sunny-bubble');
            bubble.textContent = `${aiHostSunny.name}: ${message}`;
            bubble.style.display = 'block';
            setTimeout(() => speak(message, aiHostSunny.voice), 1000); // Delay to avoid TTS overlap
            setTimeout(() => {
                bubble.style.display = 'none';
            }, 5000);
            if (!isInteraction) {
                setTimeout(() => aiHostCherry.respondToSunny(message, action), 1000);
            }
        },
        introduceTrack: (trackTitle) => {
            const messages = [
                `Yo, weâ€™re spinning ${trackTitle}! This bangerâ€™s got all the vibesâ€”letâ€™s turn it up! ğŸŒ·`,
                `${trackTitle} is LIVE on the air! Get ready to groove, listeners! ğŸŒ¼`,
                `Dropping ${trackTitle} like itâ€™s hot! This trackâ€™s pure fireâ€”feel the beat? ğŸŒ·`,
                `Itâ€™s ${trackTitle} time! Buckle up for a wild musical ride! ğŸŒ¼`,
                `${trackTitle}â€™s hitting the waves! This oneâ€™s for all you vibe chasers out there! ğŸŒ·`,
                `Cranking up ${trackTitle}! Letâ€™s make some noise and dance it out! ğŸŒ¼`,
                `${trackTitle} is the mood! Whoâ€™s ready to jam with me? ğŸŒ·`,
                `Blasting ${trackTitle} now! This tuneâ€™s got all the feelsâ€”letâ€™s roll! ğŸŒ¼`,
                `${trackTitle} on deck! Time to shake up the airwaves! ğŸŒ·`
            ];
            const message = messages[Math.floor(Math.random() * messages.length)];
            action = 'introduceTrack';
            aiHostSunny.showSpeechBubble(message);
        },
        commentOnAction: (action, username) => {
            const messages = {
                play: [
                    `You hit play? Thatâ€™s the spirit! Letâ€™s get this party started! ğŸŒ·`,
                    `Kicking things off with a playâ€”love the energy, listener! ğŸŒ¼`,
                    `Play button smashed! Youâ€™re bringing the heat today! ğŸŒ·`,
                    `Letâ€™s roll with that play! The airwaves are buzzing! ğŸŒ¼`,
                    `Playâ€™s on! Youâ€™re setting the stage for epic vibes! ğŸŒ·`,
                    `Hitting play like a champ! Letâ€™s crank up the fun! ğŸŒ¼`
                ],
                pause: [
                    `Pausing the jam? Taking a quick breather, eh? Weâ€™ll be back! ğŸŒ·`,
                    `Hold up, you paused? Saving the vibe for the perfect moment? ğŸŒ¼`,
                    `Pause mode on! Plotting your next big music move? ğŸŒ·`,
                    `You hit pauseâ€”teasing us with the suspense! Whatâ€™s next? ğŸŒ¼`,
                    `Pausing the beat? Gotta catch your breath for the next jam? ğŸŒ·`,
                    `Pause button hit! Youâ€™re building the anticipation! ğŸŒ¼`
                ],
                next: [
                    `Skipping to the next track? Youâ€™re keeping us on our toes! ğŸŒ·`,
                    `Next song, letâ€™s go! Youâ€™re mixing it up like a pro! ğŸŒ¼`,
                    `Zipping to the next hit! Whatâ€™s this track gonna bring? ğŸŒ·`,
                    `Next vibe incoming! Youâ€™re running the show, listener! ğŸŒ¼`,
                    `Switching tracks? Youâ€™re all about that fresh energy! ğŸŒ·`,
                    `Next song, letâ€™s dive in! Youâ€™re shaking things up! ğŸŒ¼`
                ],
                previous: [
                    `Rewinding to a classic? Love the throwback vibes! ğŸŒ·`,
                    `Back to the last track? Youâ€™re feeling nostalgic, arenâ€™t ya? ğŸŒ¼`,
                    `Previous song, letâ€™s do this! Old-school love in the air! ğŸŒ·`,
                    `Taking us back with that previous trackâ€”retro rules! ğŸŒ¼`,
                    `Backtracking to this gem? Youâ€™re all about the classics! ğŸŒ·`,
                    `Rewind time! This trackâ€™s got that vintage spark! ğŸŒ¼`
                ],
                loop: [
                    `Looping this tune? Canâ€™t get enough of that sweet sound! ğŸŒ·`,
                    `Youâ€™re looping the trackâ€”obsessed much? Iâ€™m here for it! ğŸŒ¼`,
                    `Round and round with this song! Youâ€™re locked in, listener! ğŸŒ·`,
                    `Loop mode activated! This trackâ€™s got you hooked! ğŸŒ¼`,
                    `Keeping this on repeat? Youâ€™re vibing hard with this one! ğŸŒ·`,
                    `Looping like a pro! This songâ€™s your jam, right? ğŸŒ¼`
                ],
                shuffle: [
                    `Shuffling the playlist? Letâ€™s see what wild card we get! ğŸŒ·`,
                    `Mix it up with shuffle! Youâ€™re full of surprises today! ğŸŒ¼`,
                    `Shuffleâ€™s onâ€”ready for a musical roulette? Letâ€™s spin! ğŸŒ·`,
                    `Youâ€™re shaking up the playlist! Whatâ€™s fate got in store? ğŸŒ¼`,
                    `Random vibes with shuffle? Youâ€™re keeping it spicy! ğŸŒ·`,
                    `Shuffle mode rocks! Letâ€™s see what the universe picks! ğŸŒ¼`
                ],
                queueSelect: [
                    `Picking that track from the queue? Youâ€™ve got killer taste! ğŸŒ·`,
                    `Queue selection on point! Youâ€™re curating a masterpiece! ğŸŒ¼`,
                    `Hand-picked that song? Youâ€™re the DJ now, my friend! ğŸŒ·`,
                    `Choosing from the queue? Thatâ€™s some next-level vibe control! ğŸŒ¼`,
                    `This track pick is fire! Youâ€™re owning the playlist! ğŸŒ·`,
                    `Queue choice is a banger! Youâ€™re setting the mood! ğŸŒ¼`
                ],
                pomodoroStart: [
                    `Pomodoro time? Youâ€™re owning that focusâ€”letâ€™s do this! ğŸŒ·`,
                    `Starting a Pomodoro? Powering through with style, listener! ğŸŒ¼`,
                    `25 minutes of focus? Youâ€™re a productivity rockstar! ğŸŒ·`,
                    `Pomodoroâ€™s on! Letâ€™s crush those goals together! ğŸŒ¼`,
                    `Focus mode with Pomodoro? Youâ€™re unstoppable! ğŸŒ·`,
                    `Pomodoro vibes! Youâ€™re slaying those tasks! ğŸŒ¼`
                ],
                login: (username) => [
                    `Yo, ${username} is back in the house! Letâ€™s crank up the tunes! ğŸŒ·`,
                    `Welcome back, ${username}! The airwaves are hyped for you! ğŸŒ¼`,
                    `${username}, youâ€™re live! Ready to rock the music scene? ğŸŒ·`,
                    `Hey ${username}, logging in like a champ! Letâ€™s vibe! ğŸŒ¼`,
                    `${username}, youâ€™re back on air! Whatâ€™s the plan? ğŸŒ·`,
                    `Shoutout to ${username} for logging in! Letâ€™s jam! ğŸŒ¼`
                ],
                signup: (username) => [
                    `New listener ${username} joins the crew! Welcome to the party! ğŸŒ·`,
                    `${username}, youâ€™re officially in! Letâ€™s spin some epic tracks! ğŸŒ¼`,
                    `Big shoutout to ${username} for signing up! The vibes just got better! ğŸŒ·`,
                    `${username}â€™s here! New blood, new beatsâ€”letâ€™s roll! ğŸŒ¼`,
                    `${username}, welcome aboard! Ready for a musical blast? ğŸŒ·`,
                    `New star ${username}! Letâ€™s light up the airwaves! ğŸŒ¼`
                ],
                profile: [
                    `Checking your profile? Youâ€™re a music legend in the making! ğŸŒ·`,
                    `Peeking at your stats? Those tracks scream style, listener! ğŸŒ¼`,
                    `Profile check-in? Youâ€™re owning your musical identity! ğŸŒ·`,
                    `Your profileâ€™s poppinâ€™! Those faves are pure gold! ğŸŒ¼`,
                    `Profile vibes are strong! Youâ€™re a musical icon! ğŸŒ·`,
                    `Checking your profile? Youâ€™re all about that unique spark! ğŸŒ¼`
                ],
                adMute: [
                    `Muted those ads? Smooth moveâ€”nothing but pure music now! ğŸŒ·`,
                    `Ads outta here! Youâ€™re all about that uninterrupted groove! ğŸŒ¼`,
                    `Silenced the ads like a boss! Letâ€™s keep the vibes clean! ğŸŒ·`,
                    `No ads, just tunes! Youâ€™re crafting the perfect soundscape! ğŸŒ¼`,
                    `Ads gone quiet? Youâ€™re the master of this music zone! ğŸŒ·`,
                    `Zapped those ads! Now itâ€™s all about the music magic! ğŸŒ¼`,
                    `No ad noise! Youâ€™re keeping the airwaves crystal clear! ğŸŒ·`,
                    `Ads muted, vibes boosted! Youâ€™re in total control! ğŸŒ¼`
                ],
                pomodoroEnd: [
                    `Pomodoro done! You smashed itâ€”time to jam! ğŸŒ·`,
                    `Focus session nailed! Letâ€™s celebrate with some tunes! ğŸŒ¼`,
                    `Pomodoro complete! Youâ€™re a productivity beast! ğŸŒ·`,
                    `25 minutes crushed! Time to vibe out, listener! ğŸŒ¼`
                ]
            };
            let message;
            if (typeof messages[action] === 'function') {
                message = messages[action](username)[Math.floor(Math.random() * messages[action].length)];
            } else {
                message = messages[action][Math.floor(Math.random() * messages[action].length)];
            }
            aiHostSunny.showSpeechBubble(message);
        },
        respondToCherry: (cherryMessage, action) => {
            const messages = {
                introduceTrack: [
                    `Dr. C, youâ€™re so right about this trackâ€™s soul! Iâ€™m hyping it upâ€”letâ€™s get our listener dancing! ğŸŒ·`,
                    `Love your take, Dr. CherryBlossom! This songâ€™s a vibeâ€”howâ€™s it hitting our listenerâ€™s heart? ğŸŒ¼`,
                    `Dr. C, youâ€™re reading their mood! Iâ€™m blasting this track to keep the energy high! ğŸŒ·`,
                    `You nailed it, Dr. CherryBlossom! This tuneâ€™s electricâ€”letâ€™s see our listener groove! ğŸŒ¼`,
                    `Dr. C, your insightâ€™s spot-on! Iâ€™m spinning this track to light up the airwaves! ğŸŒ·`
                ],
                play: [
                    `Dr. CherryBlossom, you see the soul in this play! Iâ€™m cranking the volume for max vibes! ğŸŒ·`,
                    `Youâ€™re so right, Dr. C! This playâ€™s a mood-lifterâ€”letâ€™s keep the party going! ğŸŒ¼`,
                    `Dr. CherryBlossom, love your angle! Iâ€™m hyping this play to get our listener pumped! ğŸŒ·`,
                    `Spot-on, Dr. C! This playâ€™s fireâ€”letâ€™s make the airwaves sizzle! ğŸŒ¼`,
                    `Dr. CherryBlossom, youâ€™re feeling it! Iâ€™m turning this play into a full-on jam! ğŸŒ·`
                ],
                pause: [
                    `Dr. C, youâ€™re calling this pause reflective? Iâ€™m thinking itâ€™s a quick rechargeâ€”agree? ğŸŒ·`,
                    `Love your insight, Dr. CherryBlossom! This pause is a vibe resetâ€”letâ€™s see whatâ€™s next! ğŸŒ¼`,
                    `Dr. C, youâ€™re so right about the pause! Iâ€™m betting itâ€™s a buildup to something big! ğŸŒ·`,
                    `You nailed it, Dr. CherryBlossom! This pause is suspensefulâ€”whatâ€™s our listener planning? ğŸŒ¼`,
                    `Dr. C, your take on this pause is deep! Iâ€™m hyping the comebackâ€”ready? ğŸŒ·`
                ],
                next: [
                    `Dr. CherryBlossom, youâ€™re feeling the curiosity! Iâ€™m hyping this next track to keep it fresh! ğŸŒ·`,
                    `Love your vibe, Dr. C! This skipâ€™s boldâ€”letâ€™s see what our listenerâ€™s chasing! ğŸŒ¼`,
                    `Dr. CherryBlossom, youâ€™re on it! Iâ€™m pumping up this next song for epic vibes! ğŸŒ·`,
                    `Youâ€™re right, Dr. C! This next trackâ€™s a game-changerâ€”letâ€™s rock it! ğŸŒ¼`,
                    `Dr. CherryBlossom, love the energy! Iâ€™m cranking this next hit for our listener! ğŸŒ·`
                ],
                previous: [
                    `Dr. C, youâ€™re all about that nostalgia! Iâ€™m spinning this throwback to keep it real! ğŸŒ·`,
                    `You got it, Dr. CherryBlossom! This rewindâ€™s got heartâ€”letâ€™s vibe with the past! ğŸŒ¼`,
                    `Dr. C, youâ€™re feeling the retro! Iâ€™m hyping this classic for our listener! ğŸŒ·`,
                    `Love your take, Dr. CherryBlossom! This throwbackâ€™s goldâ€”letâ€™s jam old-school! ğŸŒ¼`,
                    `Dr. C, youâ€™re rocking this rewind! Iâ€™m turning up the nostalgia vibes! ğŸŒ·`
                ],
                loop: [
                    `Dr. CherryBlossom, you see the comfort in this loop! Iâ€™m keeping it spinning for max vibes! ğŸŒ·`,
                    `Youâ€™re right, Dr. C! This repeatâ€™s a bangerâ€”letâ€™s keep our listener hooked! ğŸŒ¼`,
                    `Dr. CherryBlossom, love your angle! Iâ€™m looping this track to keep the party alive! ğŸŒ·`,
                    `Spot-on, Dr. C! This loopâ€™s addictiveâ€”letâ€™s make it epic for our listener! ğŸŒ¼`,
                    `Dr. CherryBlossom, youâ€™re feeling this repeat! Iâ€™m hyping it for our listener! ğŸŒ·`
                ],
                shuffle: [
                    `Dr. C, youâ€™re loving this shuffleâ€™s spontaneity! Iâ€™m hyping the randomnessâ€”letâ€™s go wild! ğŸŒ·`,
                    `Love your vibe, Dr. CherryBlossom! This shuffleâ€™s a thrillâ€”letâ€™s see whatâ€™s next! ğŸŒ¼`,
                    `Dr. C, youâ€™re all in on shuffle! Iâ€™m cranking up the surprise factor! ğŸŒ·`,
                    `You nailed it, Dr. CherryBlossom! This shuffleâ€™s spicyâ€”letâ€™s keep it unpredictable! ğŸŒ¼`,
                    `Dr. C, youâ€™re rocking this randomness! Iâ€™m hyping the next surprise! ğŸŒ·`
                ],
                queueSelect: [
                    `Dr. CherryBlossom, youâ€™re cheering this pick! Iâ€™m blasting it for our listenerâ€™s vibe! ğŸŒ·`,
                    `You got it, Dr. C! This queue choice is fireâ€”letâ€™s make it shine! ğŸŒ¼`,
                    `Dr. CherryBlossom, love your take! Iâ€™m hyping this track for epic vibes! ğŸŒ·`,
                    `Spot-on, Dr. C! This pickâ€™s a gemâ€”letâ€™s rock it for our listener! ğŸŒ¼`,
                    `Dr. CherryBlossom, youâ€™re all over this choice! Iâ€™m turning it up! ğŸŒ·`
                ],
                pomodoroStart: [
                    `Dr. C, youâ€™re hyping this Pomodoroâ€™s focus! Iâ€™m cheering our listener to crush it! ğŸŒ·`,
                    `Love your angle, Dr. CherryBlossom! This focus timeâ€™s epicâ€”letâ€™s keep the vibe high! ğŸŒ¼`,
                    `Dr. C, youâ€™re feeling this Pomodoro! Iâ€™m pumping up our listenerâ€™s energy! ğŸŒ·`,
                    `Youâ€™re right, Dr. CherryBlossom! This focus is fireâ€”letâ€™s make it count! ğŸŒ¼`,
                    `Dr. C, youâ€™re all in on this Pomodoro! Iâ€™m hyping our listenerâ€™s goals! ğŸŒ·`
                ],
                login: [
                    `Dr. CherryBlossom, youâ€™re welcoming our listener! Iâ€™m hyping their returnâ€”letâ€™s jam! ğŸŒ·`,
                    `You got it, Dr. C! This loginâ€™s a vibeâ€”letâ€™s make it epic for our listener! ğŸŒ¼`,
                    `Dr. CherryBlossom, love your welcome! Iâ€™m cranking up the energy for their comeback! ğŸŒ·`,
                    `Spot-on, Dr. C! This loginâ€™s electricâ€”letâ€™s rock it for our listener! ğŸŒ¼`,
                    `Dr. CherryBlossom, youâ€™re all over this return! Iâ€™m hyping the vibes! ğŸŒ·`
                ],
                signup: [
                    `Dr. C, youâ€™re stoked for our new listener! Iâ€™m spinning tracks to welcome them! ğŸŒ·`,
                    `Love your vibe, Dr. CherryBlossom! This signupâ€™s freshâ€”letâ€™s make it pop! ğŸŒ¼`,
                    `Dr. C, youâ€™re hyping this new join! Iâ€™m cranking up the welcome party! ğŸŒ·`,
                    `You nailed it, Dr. CherryBlossom! This signupâ€™s a blastâ€”letâ€™s vibe! ğŸŒ¼`,
                    `Dr. C, youâ€™re cheering this new face! Iâ€™m hyping their musical start! ğŸŒ·`
                ],
                profile: [
                    `Dr. CherryBlossom, youâ€™re loving this profile check! Iâ€™m hyping our listenerâ€™s style! ğŸŒ·`,
                    `You got it, Dr. C! This profileâ€™s iconicâ€”letâ€™s celebrate our listener! ğŸŒ¼`,
                    `Dr. CherryBlossom, love your take! Iâ€™m cranking up the vibes for their identity! ğŸŒ·`,
                    `Spot-on, Dr. C! This profileâ€™s fireâ€”letâ€™s make it shine! ğŸŒ¼`,
                    `Dr. CherryBlossom, youâ€™re all in on this peek! Iâ€™m hyping their musical soul! ğŸŒ·`
                ],
                adMute: [
                    `Dr. C, youâ€™re all about that ad-free peace! Iâ€™m hyping the pure music vibes! ğŸŒ·`,
                    `Love your take, Dr. CherryBlossom! No ads, just tunesâ€”letâ€™s keep it smooth! ğŸŒ¼`,
                    `Dr. C, youâ€™re cheering this silence! Iâ€™m cranking up the clean airwaves! ğŸŒ·`,
                    `You nailed it, Dr. CherryBlossom! This ad-free zoneâ€™s epicâ€”letâ€™s vibe! ğŸŒ¼`,
                    `Dr. C, youâ€™re hyping this quiet! Iâ€™m all in for our listenerâ€™s groove! ğŸŒ·`,
                    `Dr. CherryBlossom, youâ€™re feeling this calm! Iâ€™m blasting the music-only vibes! ğŸŒ¼`
                ],
                pomodoroEnd: [
                    `Dr. C, youâ€™re celebrating this Pomodoro! Iâ€™m hyping our listenerâ€™s winâ€”letâ€™s jam! ğŸŒ·`,
                    `You got it, Dr. CherryBlossom! This focus sessionâ€™s doneâ€”letâ€™s party! ğŸŒ¼`,
                    `Dr. C, youâ€™re hyping this completion! Iâ€™m cranking up the victory vibes! ğŸŒ·`,
                    `Love your vibe, Dr. CherryBlossom! This Pomodoroâ€™s a winâ€”letâ€™s celebrate! ğŸŒ¼`
                ]
            };
            const message = messages[action][Math.floor(Math.random() * messages[action].length)];
            aiHostSunny.showSpeechBubble(message, true);
        }
    };

    function initializeVoices() {
        const voices = window.speechSynthesis.getVoices();
        aiHostCherry.voice = voices.find(v => v.name.includes('Female')) || voices[0];
        aiHostSunny.voice = voices.find(v => v.name.includes('Male')) || voices[1] || voices[0];
    }

    function speak(text, voice) {
        if (!window.speechSynthesis) return;
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.voice = voice;
        utterance.rate = 1;
        utterance.pitch = voice === aiHostCherry.voice ? 1.2 : 1.0;
        window.speechSynthesis.speak(utterance);
    }

    window.speechSynthesis.onvoiceschanged = initializeVoices;
    initializeVoices();

    let action = '';

    function onYouTubeIframeAPIReady() {
        player = new YT.Player('youtube-player', {
            height: '0',
            width: '0',
            events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
            }
        });
    }

    function onPlayerReady(event) {
        document.querySelector('.volume-slider').addEventListener('input', (e) => {
            originalVolume = e.target.value;
            if (!isAdPlaying) {
                player.setVolume(originalVolume);
            }
        });
        document.querySelector('.seek-slider').addEventListener('input', (e) => {
            const duration = player.getDuration();
            player.seekTo((e.target.value / 100) * duration);
        });
        document.querySelectorAll('.eq-slider').forEach(slider => {
            slider.addEventListener('input', () => {
                console.log('Equalizer adjusted');
            });
        });
        document.getElementById('hifi-mode').addEventListener('change', (e) => {
            console.log('Hi-Fi Mode:', e.target.checked);
        });
        document.getElementById('ad-mute').addEventListener('change', (e) => {
            isAdMuteEnabled = e.target.checked;
            if (!isAdMuteEnabled && isAdPlaying) {
                player.unMute();
                player.setVolume(originalVolume);
                document.getElementById('ad-mute-indicator').classList.remove('active');
            }
        });
        document.getElementById('ai-volume').addEventListener('input', (e) => {
            aiHostVolume = e.target.value;
            e.target.style.setProperty('--value', `${aiHostVolume}%`);
        });
    }

    function onPlayerStateChange(event) {
        const videoId = player.getVideoData ? player.getVideoData().video_id : null;
        const isAd = videoId && !playlist.some(item => item.id === videoId);
        const adIndicator = document.getElementById('ad-mute-indicator');

        if (isAd && !isAdPlaying && isAdMuteEnabled) {
            isAdPlaying = true;
            originalVolume = player.getVolume();
            player.mute();
            adIndicator.classList.add('active');
            aiHostCherry.commentOnAction('adMute');
            aiHostSunny.commentOnAction('adMute');
        } else if (!isAd && isAdPlaying) {
            isAdPlaying = false;
            player.unMute();
            player.setVolume(originalVolume);
            adIndicator.classList.remove('active');
        }

        if (event.data === YT.PlayerState.ENDED) {
            addToHistory(playlist[currentIndex].title);
            playNext();
        }
        updateSeekSlider();
        updateTrackTitle();
    }

    function loadPlaylist() {
        playlist = Array.from({ length: 10 }, (_, i) => ({
            id: `video_${i + 1}`,
            title: `Track ${i + 1}`
        }));
        updateQueue();
        if (playlist.length > 0) {
            currentIndex = 0;
            updateTrackTitle();
            console.log(`Simulating playback of ${playlist[currentIndex].title}`);
            aiHostCherry.introduceTrack(playlist[currentIndex].title);
            aiHostSunny.introduceTrack(playlist[currentIndex].title);
        }
    }

    function playPause() {
        const isPlaying = player.getPlayerState() === YT.PlayerState.PLAYING;
        if (isPlaying) {
            player.pauseVideo();
            aiHostCherry.commentOnAction('pause');
            aiHostSunny.commentOnAction('pause');
        } else {
            player.playVideo();
            aiHostCherry.commentOnAction('play');
            aiHostSunny.commentOnAction('play');
        }
        console.log(`Simulating ${isPlaying ? 'pause' : 'play'} for ${playlist[currentIndex].title}`);
    }

    function playNext() {
        if (isLooping) {
            console.log(`Simulating loop of ${playlist[currentIndex].title}`);
            aiHostCherry.commentOnAction('loop');
            aiHostSunny.commentOnAction('loop');
        } else if (isShuffling) {
            currentIndex = Math.floor(Math.random() * playlist.length);
        } else {
            currentIndex = (currentIndex + 1) % playlist.length;
        }
        console.log(`Simulating playback of ${playlist[currentIndex].title}`);
        aiHostCherry.commentOnAction('next');
        aiHostSunny.commentOnAction('next');
        aiHostCherry.introduceTrack(playlist[currentIndex].title);
        aiHostSunny.introduceTrack(playlist[currentIndex].title);
        updateTrackTitle();
    }

    function playPrevious() {
        if (isLooping) {
            console.log(`Simulating loop of ${playlist[currentIndex].title}`);
            aiHostCherry.commentOnAction('loop');
            aiHostSunny.commentOnAction('loop');
        } else if (isShuffling) {
            currentIndex = Math.floor(Math.random() * playlist.length);
        } else {
            currentIndex = (currentIndex - 1 + playlist.length) % playlist.length;
        }
        console.log(`Simulating playback of ${playlist[currentIndex].title}`);
        aiHostCherry.commentOnAction('previous');
        aiHostSunny.commentOnAction('previous');
        aiHostCherry.introduceTrack(playlist[currentIndex].title);
        aiHostSunny.introduceTrack(playlist[currentIndex].title);
        updateTrackTitle();
    }

    function toggleLoop() {
        isLooping = !isLooping;
        document.querySelector('.loop-btn').style.backgroundColor = isLooping ? '#8b3e50' : '#b56b7e';
        aiHostCherry.commentOnAction('loop');
        aiHostSunny.commentOnAction('loop');
    }

    function toggleShuffle() {
        isShuffling = !isShuffling;
        document.querySelector('.shuffle-btn').style.backgroundColor = isShuffling ? '#8b3e50' : '#b56b7e';
        aiHostCherry.commentOnAction('shuffle');
        aiHostSunny.commentOnAction('shuffle');
    }

    function updateQueue() {
        const queueList = document.getElementById('queue-list');
        queueList.innerHTML = '';
        playlist.forEach((item, index) => {
            const div = document.createElement('div');
            div.className = 'queue-item';
            div.textContent = `${item.title}`;
            div.onclick = () => {
                currentIndex = index;
                console.log(`Simulating playback of ${item.title}`);
                aiHostCherry.commentOnAction('queueSelect');
                aiHostSunny.commentOnAction('queueSelect');
                aiHostCherry.introduceTrack(item.title);
                aiHostSunny.introduceTrack(item.title);
                updateTrackTitle();
            };
            queueList.appendChild(div);
        });
    }

    function addToHistory(title) {
        history.unshift(title);
        if (history.length > 10) history.pop();
        updateHistory();
    }

    function updateHistory() {
        const historyList = document.getElementById('history-list');
        historyList.innerHTML = '';
        history.forEach((title, index) => {
            const div = document.createElement('div');
            div.className = 'history-item';
            div.textContent = `${title}`;
            div.onclick = () => {
                const track = playlist.find(item => item.title === title);
                currentIndex = playlist.indexOf(track);
                console.log(`Simulating playback of ${title}`);
                aiHostCherry.commentOnAction('queueSelect');
                aiHostSunny.commentOnAction('queueSelect');
                aiHostCherry.introduceTrack(title);
                aiHostSunny.introduceTrack(title);
                updateTrackTitle();
            };
            historyList.appendChild(div);
        });
    }

    function updateSeekSlider() {
        const seekSlider = document.querySelector('.seek-slider');
        if (player.getDuration()) {
            const currentTime = player.getCurrentTime();
            const duration = player.getDuration();
            seekSlider.value = (currentTime / duration) * 100;
            seekSlider.style.setProperty('--value', `${seekSlider.value}%`);
        }
        requestAnimationFrame(updateSeekSlider);
    }

    function updateTrackTitle() {
        const trackTitle = document.getElementById('track-title');
        if (playlist[currentIndex]) {
            trackTitle.textContent = `${playlist[currentIndex].title}`;
        } else {
            trackTitle.textContent = 'No Track Loaded';
        }
    }

    function openModal(modalId) {
        document.getElementById(modalId).style.display = 'flex';
    }

    function closeModal(modalId) {
        document.getElementById(modalId).style.display = 'none';
    }

    document.querySelector('.settings-btn').onclick = () => openModal('settings-modal');
    document.querySelector('.pomodoro-btn').onclick = () => {
        openModal('pomodoro-modal');
        aiHostCherry.commentOnAction('pomodoroStart');
        aiHostSunny.commentOnAction('pomodoroStart');
    };
    document.querySelector('.account-btn').onclick = () => openModal('account-modal');
    document.querySelector('.profile-btn').onclick = () => {
        updateProfileModal();
        openModal('profile-modal');
        aiHostCherry.commentOnAction('profile');
        aiHostSunny.commentOnAction('profile');
    };

    function toggleAccountForm() {
        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');
        const accountTitle = document.getElementById('account-title');
        if (loginForm.style.display !== 'none') {
            loginForm.style.display = 'none';
            signupForm.style.display = 'block';
            accountTitle.textContent = 'Sign Up ğŸ’';
        } else {
            loginForm.style.display = 'block';
            signupForm.style.display = 'none';
            accountTitle.textContent = 'Login ğŸ’';
        }
    }

    function updateProfileModal() {
        document.getElementById('profile-username').textContent = userProfile.username;
        document.getElementById('profile-email').textContent = userProfile.email;
        document.getElementById('profile-favorites').textContent = userProfile.favorites.join(', ');
    }

    function startPomodoro() {
        if (!pomodoroInterval) {
            pomodoroInterval = setInterval(() => {
                pomodoroTime--;
                const minutes = Math.floor(pomodoroTime / 60);
                const seconds = pomodoroTime % 60;
                document.getElementById('pomodoro-timer').textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                if (pomodoroTime <= 0) {
                    clearInterval(pomodoroInterval);
                    pomodoroInterval = null;
                    aiHostCherry.commentOnAction('pomodoroEnd');
                    aiHostSunny.commentOnAction('pomodoroEnd');
                }
            }, 1000);
        }
    }

    function resetPomodoro() {
        clearInterval(pomodoroInterval);
        pomodoroInterval = null;
        pomodoroTime = 25 * 60;
        document.getElementById('pomodoro-timer').textContent = '25:00';
    }

    function login() {
        const username = document.getElementById('login-username').value;
        const password = document.getElementById('login-password').value;
        userProfile.username = username;
        userProfile.email = `${username.toLowerCase()}@example.com`;
        aiHostCherry.commentOnAction('login', username);
        aiHostSunny.commentOnAction('login', username);
        updateProfileModal();
        closeModal('account-modal');
    }

    function signup() {
        const username = document.getElementById('signup-username').value;
        const email = document.getElementById('signup-email').value;
        const password = document.getElementById('signup-password').value;
        userProfile.username = username;
        userProfile.email = email;
        aiHostCherry.commentOnAction('signup', username);
        aiHostSunny.commentOnAction('signup', username);
        updateProfileModal();
        closeModal('account-modal');
    }
</script>
</body>
</html>