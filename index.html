<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retro Cherry Music Player</title>
    <style>
        body {
            background-color: #e8b7c2;
            font-family: 'Courier New', Courier, monospace;
            color: #2b1a20;
            margin: 0;
            padding: 25px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .player-container {
            background-color: #d89aa7;
            border: 6px solid #b56b7e;
            border-radius: 20px;
            padding: 25px;
            width: 420px;
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        .player-container::before {
            content: 'üçí';
            position: absolute;
            top: -20px;
            left: 20px;
            font-size: 30px;
        }
        .player-container::after {
            content: 'üå∏';
            position: absolute;
            bottom: -70px;
            right: 20px;
            font-size: 30px;
        }
        .controls, .settings, .queue, .history {
            margin-bottom: 25px;
        }
        .settings button, .account-btn, .pomodoro-btn, .profile-btn {
            background-color: #b56b7e;
            border: 3px solid #8b3e50;
            color: #fff0f3;
            padding: 12px;
            margin: 6px;
            border-radius: 12px;
            cursor: pointer;
            font-family: 'Courier New', Courier, monospace;
            font-weight: bold;
            transition: background-color 0.3s, transform 0.1s;
        }
        .settings button:hover, .account-btn:hover, .pomodoro-btn:hover, .profile-btn:hover {
            background-color: #8b3e50;
            transform: scale(1.05);
        }
        .media-controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            background-color: #e8b7c2;
            padding: 10px;
            border-radius: 10px;
            border: 2px solid #b56b7e;
            position: relative;
        }
        .track-title {
            width: 100%;
            text-align: center;
            margin-bottom: 10px;
            font-size: 16px;
            color: #2b1a20;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .media-controls button {
            background-color: #b56b7e;
            border: 2px solid #8b3e50;
            color: #fff0f3;
            padding: 10px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
        }
        .seek-slider, .volume-slider, .ai-volume-slider {
            width: 100%;
            accent-color: #b56b7e;
            background: linear-gradient(to right, #b56b7e 0%, #b56b7e var(--value), #e8b7c2 var(--value), #e8b7c2 100%);
        }
        .queue, .history {
            max-height: 160px;
            overflow-y: auto;
            background-color: #e8b7c2;
            padding: 12px;
            border-radius: 12px;
            border: 2px solid #b56b7e;
        }
        .queue-item, .history-item {
            padding: 8px;
            cursor: pointer;
            border-bottom: 1px dotted #b56b7e;
        }
        .queue-item:hover, .history-item:hover {
            background-color: #cc8899;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(43, 26, 32, 0.6);
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #d89aa7;
            padding: 25px;
            border-radius: 20px;
            width: 320px;
            text-align: center;
            border: 3px solid #b56b7e;
        }
        .modal-content input {
            margin: 12px 0;
            padding: 10px;
            width: 85%;
            border: 2px solid #b56b7e;
            border-radius: 10px;
            background-color: #e8b7c2;
            color: #2b1a20;
        }
        .equalizer {
            display: flex;
            justify-content: space-around;
            margin: 15px 0;
        }
        .equalizer input {
            height: 120px;
            transform: rotate(-90deg);
            accent-color: #b56b7e;
        }
        .pomodoro-timer {
            font-size: 28px;
            margin: 12px 0;
            color: #2b1a20;
        }
        .hifi-toggle, .ad-mute-toggle, .ai-volume-control {
            margin: 15px 0;
        }
        .hifi-toggle input, .ad-mute-toggle input {
            accent-color: #b56b7e;
        }
        input[type="text"], input[type="password"], input[type="email"] {
            font-family: 'Courier New', Courier, monospace;
        }
        button {
            font-size: 14px;
        }
        .account-toggle {
            margin: 10px 0;
            color: #2b1a20;
            cursor: pointer;
            text-decoration: underline;
        }
        .account-toggle:hover {
            color: #8b3e50;
        }
        .profile-info {
            text-align: left;
            margin: 15px 0;
        }
        .profile-info p {
            margin: 5px 0;
        }
        .cherry-bubble {
            position: absolute;
            top: -120px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #fff0f3;
            border: 2px solid #b56b7e;
            border-radius: 15px;
            padding: 8px;
            width: 200px;
            text-align: center;
            font-size: 14px;
            color: #2b1a20;
            display: none;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            animation: float 1.5s ease-in-out infinite;
        }
        .cherry-bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 10px solid #b56b7e;
        }
        .sunny-bubble {
            position: absolute;
            bottom: -120px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #fff0f3;
            border: 2px solid #b56b7e;
            border-radius: 15px;
            padding: 8px;
            width: 200px;
            text-align: center;
            font-size: 14px;
            color: #2b1a20;
            display: none;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            animation: float 1.5s ease-in-out infinite;
        }
        .sunny-bubble::after {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-bottom: 10px solid #b56b7e;
        }
        @keyframes float {
            0%, 100% { transform: translate(-50%, 0); }
            50% { transform: translate(-50%, -10px); }
        }
        .ad-mute-indicator {
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 24px;
            color: #8b3e50;
            display: none;
        }
        .ad-mute-indicator.active {
            display: block;
        }
    </style>
</head>
<body>
<div class="player-container">
    <div class="cherry-bubble" id="cherry-bubble"></div>
    <div class="sunny-bubble" id="sunny-bubble"></div>
    <div class="settings">
        <button class="settings-btn">Settings üçí</button>
        <button class="pomodoro-btn">Pomodoro üå∏</button>
        <button class="account-btn">Account üçí</button>
        <button class="profile-btn">Profile üå∏</button>
    </div>
    <input type="text" id="playlist-url" placeholder="YouTube Playlist/Video URL">
    <button onclick="loadPlaylist()">Load Playlist üå∏</button>
    <div class="media-controls">
        <div class="track-title" id="track-title">No Track Loaded</div>
        <button onclick="playPrevious()">Previous üçí</button>
        <button onclick="playPause()">Play/Pause üå∏</button>
        <button onclick="playNext()">Next üçí</button>
        <input type="range" class="seek-slider" min="0" max="100" value="0">
        <button onclick="toggleLoop()">Loop üå∏</button>
        <button onclick="toggleShuffle()">Shuffle üçí</button>
        <input type="range" class="volume-slider" min="0" max="100" value="50">
        <div class="ad-mute-indicator" id="ad-mute-indicator">üîá</div>
    </div>
    <div class="queue">
        <h3>Queue üçí</h3>
        <div id="queue-list"></div>
    </div>
    <div class="history">
        <h3>History üå∏</h3>
        <div id="history-list"></div>
    </div>
    <div id="youtube-player" style="display: none;"></div>
</div>

<!-- Settings Modal (Equalizer + Hi-Fi + Ad Mute + AI Volume) -->
<div id="settings-modal" class="modal">
    <div class="modal-content">
        <h3>Settings üçí</h3>
        <h4>Equalizer üå∏</h4>
        <div class="equalizer">
            <input type="range" min="-12" max="12" value="0" class="eq-slider" id="eq-bass">
            <input type="range" min="-12" max="12" value="0" class="eq-slider" id="eq-mid">
            <input type="range" min="-12" max="12" value="0" class="eq-slider" id="eq-treble">
        </div>
        <div class="hifi-toggle">
            <label for="hifi-mode">Hi-Fi Mode üçí:</label>
            <input type="checkbox" id="hifi-mode">
        </div>
        <div class="ad-mute-toggle">
            <label for="ad-mute">Mute Ads üå∏:</label>
            <input type="checkbox" id="ad-mute" checked>
        </div>
        <div class="ai-volume-control">
            <label for="ai-volume">AI Hosts Volume üçí:</label>
            <input type="range" class="ai-volume-slider" id="ai-volume" min="0" max="100" value="100">
        </div>
        <button onclick="closeModal('settings-modal')">Close üå∏</button>
    </div>
</div>

<!-- Pomodoro Modal -->
<div id="pomodoro-modal" class="modal">
    <div class="modal-content">
        <h3>Pomodoro Timer üçí</h3>
        <div class="pomodoro-timer" id="pomodoro-timer">25:00</div>
        <button onclick="startPomodoro()">Start üå∏</button>
        <button onclick="resetPomodoro()">Reset üçí</button>
        <button onclick="closeModal('pomodoro-modal')">Close üå∏</button>
    </div>
</div>

<!-- Account Modal (Login/Sign Up) -->
<div id="account-modal" class="modal">
    <div class="modal-content">
        <h3 id="account-title">Login üçí</h3>
        <div id="login-form">
            <input type="text" id="login-username" placeholder="Username">
            <input type="password" id="login-password" placeholder="Password">
            <button onclick="login()">Submit üå∏</button>
            <div class="account-toggle" onclick="toggleAccountForm()">Switch to Sign Up üçí</div>
        </div>
        <div id="signup-form" style="display: none;">
            <input type="text" id="signup-username" placeholder="Username">
            <input type="email" id="signup-email" placeholder="Email">
            <input type="password" id="signup-password" placeholder="Password">
            <button onclick="signup()">Submit üå∏</button>
            <div class="account-toggle" onclick="toggleAccountForm()">Switch to Login üçí</div>
        </div>
        <button onclick="closeModal('account-modal')">Close üå∏</button>
    </div>
</div>

<!-- Profile Modal -->
<div id="profile-modal" class="modal">
    <div class="modal-content">
        <h3>Profile üçí</h3>
        <div class="profile-info">
            <p><strong>Username üå∏:</strong> <span id="profile-username">Guest</span></p>
            <p><strong>Email üçí:</strong> <span id="profile-email">guest@example.com</span></p>
            <p><strong>Favorite Tracks üå∏:</strong> <span id="profile-favorites">Track 1, Track 2</span></p>
        </div>
        <button onclick="closeModal('profile-modal')">Close üå∏</button>
    </div>
</div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
    let player;
    let playlist = [];
    let history = [];
    let currentIndex = 0;
    let isLooping = false;
    let isShuffling = false;
    let pomodoroInterval;
    let pomodoroTime = 25 * 60;
    let userProfile = {
        username: 'Guest',
        email: 'guest@example.com',
        favorites: ['Track 1', 'Track 2']
    };
    let isAdPlaying = false;
    let originalVolume = 50;
    let isAdMuteEnabled = true;
    let aiHostVolume = 100;

    const aiHostCherry = {
        name: 'Dr. CherryBlossom, PsyD',
        voice: null,
        showSpeechBubble: (message, isInteraction = false) => {
            if (Math.random() * 100 > aiHostVolume) return;
            const bubble = document.getElementById('cherry-bubble');
            bubble.textContent = `${aiHostCherry.name}: ${message}`;
            bubble.style.display = 'block';
            speak(message, aiHostCherry.voice);
            setTimeout(() => {
                bubble.style.display = 'none';
            }, 5000);
            if (!isInteraction) {
                setTimeout(() => aiHostSunny.respondToCherry(message, action), 1000);
            }
        },
        introduceTrack: (trackTitle) => {
            const messages = [
                `Choosing ${trackTitle} suggests a desire for rhythm in your life. How does this tune resonate with you today? üçí`,
                `Ah, ${trackTitle}! This selection might reflect a need for energy. What draws you to this vibe? üå∏`,
                `${trackTitle} is a bold choice! It‚Äôs like a window into your mood. Care to share what‚Äôs sparking this? üçí`,
                `Spinning ${trackTitle} feels like a moment of self-expression. How‚Äôs this track speaking to your soul? üå∏`,
                `With ${trackTitle}, you‚Äôre curating your emotional landscape. What‚Äôs this song unlocking for you? üçí`,
                `${trackTitle} on the air! This feels like a personal anthem. What‚Äôs the story behind this pick? üå∏`,
                `Playing ${trackTitle} is a statement. How does it align with your inner world right now? üçí`,
                `${trackTitle} sets a unique tone. What emotions are you exploring with this choice? üçí`,
                `This ${trackTitle} pick feels intentional. How‚Äôs it shaping your day? üå∏`
            ];
            const message = messages[Math.floor(Math.random() * messages.length)];
            action = 'introduceTrack';
            aiHostCherry.showSpeechBubble(message);
        },
        commentOnAction: (action, username) => {
            const messages = {
                play: [
                    `Starting playback shows initiative! What emotions are you hoping to explore with this music? üçí`,
                    `Pressing play is a step toward mindfulness. How does this music make you feel right now? üå∏`,
                    `You‚Äôre diving into the music! What‚Äôs the mood you‚Äôre setting with this play? üçí`,
                    `Hitting play is like opening a door to your soul. What‚Äôs waiting inside? üå∏`,
                    `Play engaged! This choice feels vibrant‚Äîhow‚Äôs it lifting your spirit? üçí`,
                    `You‚Äôve sparked the music! What‚Äôs this play revealing about your mood? üå∏`
                ],
                pause: [
                    `Pausing the track‚Äîperhaps a moment to reflect? What‚Äôs on your mind during this silence? üçí`,
                    `A pause can be powerful. Are you taking a moment to process or just savoring the quiet? üå∏`,
                    `Pausing feels intentional. What thoughts are surfacing in this stillness? üçí`,
                    `You‚Äôve hit pause. Is this a breather or a chance to reset your focus? üå∏`,
                    `This pause is a space for clarity. What‚Äôs emerging in this quiet moment? üçí`,
                    `Pausing the beat‚Äîtime for introspection? What‚Äôs stirring within? üå∏`
                ],
                next: [
                    `Skipping to the next track suggests curiosity! What new feelings are you chasing? üçí`,
                    `Moving forward to another song‚Äîembracing change? What‚Äôs inspiring this shift? üå∏`,
                    `Next track, new vibe! What‚Äôs driving your urge to explore? üçí`,
                    `You‚Äôre switching it up! How does this next song fit your journey? üå∏`,
                    `Next song, bold move! What‚Äôs the next chapter in your musical story? üçí`,
                    `Advancing to the next track‚Äîcraving something fresh? What‚Äôs the draw? üå∏`
                ],
                previous: [
                    `Revisiting a past track shows nostalgia. What memories does this song bring up for you? üçí`,
                    `Going back to a previous tune‚Äîseeking comfort in the familiar? Tell me more! üå∏`,
                    `Backtracking to this song feels sentimental. What‚Äôs the pull here? üçí`,
                    `You‚Äôre revisiting an old favorite. What emotions are tied to this track? üå∏`,
                    `Rewinding to this track‚Äîyearning for the past? What‚Äôs this song evoking? üçí`,
                    `Back to a classic! How‚Äôs this throwback resonating today? üå∏`
                ],
                loop: [
                    `Looping this track indicates attachment. What about this song keeps you coming back? üçí`,
                    `Repeating a song can be soothing. How does this loop make you feel grounded? üå∏`,
                    `You‚Äôre looping this gem! What‚Äôs the magic in this track for you? üçí`,
                    `Keeping this song on repeat feels comforting. What‚Äôs it anchoring for you? üå∏`,
                    `Loop mode on! This track‚Äôs got a hold on you‚Äîwhy‚Äôs it so special? üçí`,
                    `Repeating this tune? It‚Äôs like a musical hug‚Äîhow‚Äôs it feeling? üå∏`
                ],
                shuffle: [
                    `Shuffling the playlist embraces spontaneity! How do you feel about letting chance guide your music? üçí`,
                    `Mixing it up with shuffle‚Äîopen to surprises? What‚Äôs the mood you‚Äôre hoping to discover? üå∏`,
                    `Shuffle mode on! You‚Äôre ready for anything. What‚Äôs the vibe you‚Äôre craving? üçí`,
                    `Shuffling feels adventurous! What surprises are you hoping to uncover? üå∏`,
                    `Randomizing the tracks? You‚Äôre embracing the unknown‚Äîwhat‚Äôs next? üçí`,
                    `Shuffle‚Äôs your style! How‚Äôs this unpredictability sparking joy? üå∏`
                ],
                queueSelect: [
                    `Selecting a track from the queue shows intention. What made this song the right choice now? üçí`,
                    `Picking a specific track is a form of self-expression. How does this choice reflect your mood? üå∏`,
                    `You‚Äôve chosen this track with purpose. What‚Äôs the story behind this pick? üçí`,
                    `This queue selection feels personal. How‚Äôs this song speaking to you? üå∏`,
                    `Hand-picking this track? You‚Äôre crafting your vibe‚Äîwhat‚Äôs the inspiration? üçí`,
                    `Queue choice on point! How‚Äôs this song aligning with your soul? üå∏`
                ],
                pomodoroStart: [
                    `Starting a Pomodoro session is a commitment to focus. What goals are you nurturing today? üçí`,
                    `Embracing a Pomodoro timer shows discipline. How do you feel this will support your productivity? üå∏`,
                    `Pomodoro time! You‚Äôre carving out space for progress. What‚Äôs your focus today? üçí`,
                    `Launching a Pomodoro session is empowering. What‚Äôs driving your motivation? üå∏`,
                    `25 minutes of focus? You‚Äôre setting the stage for success‚Äîwhat‚Äôs the plan? üçí`,
                    `Pomodoro activated! How‚Äôs this focus time shaping your day? üå∏`
                ],
                login: (username) => [
                    `Welcome back, ${username}! Returning here feels like a safe space. What brings you back today? üçí`,
                    `Good to see you, ${username}! Logging in suggests connection. How can I support your journey? üå∏`,
                    `Hey ${username}, you‚Äôre back! What‚Äôs the mood you‚Äôre bringing today? üçí`,
                    `${username}, logging in is like coming home. What‚Äôs on your mind? üå∏`,
                    `${username}, you‚Äôre here again! What‚Äôs sparking your return? üçí`,
                    `Welcome, ${username}! What‚Äôs the vibe you‚Äôre chasing today? üå∏`
                ],
                signup: (username) => [
                    `Welcome, ${username}! Joining us is a brave step. What inspired you to start this musical journey? üçí`,
                    `New face, ${username}! Signing up reflects curiosity. How do you hope music will enrich your life? üå∏`,
                    `${username}, you‚Äôre in! What sparked your decision to join the vibe? üçí`,
                    `Big welcome, ${username}! Signing up is a bold move. What‚Äôs your musical story? üå∏`,
                    `${username}, new listener alert! What‚Äôs fueling your musical adventure? üçí`,
                    `Hello, ${username}! Joining us is exciting‚Äîwhat‚Äôs your first musical goal? üå∏`
                ],
                profile: [
                    `Checking your profile is a moment of self-reflection. What do you value about your musical identity? üçí`,
                    `Exploring your profile shows self-awareness. How do these favorite tracks define you? üå∏`,
                    `Peeking at your profile? You‚Äôre embracing your unique vibe! What‚Äôs special about it? üçí`,
                    `Your profile tells a story. How do these tracks shape who you are? üå∏`,
                    `Profile check-in feels personal. What do these tracks say about you? üçí`,
                    `You‚Äôre diving into your profile! How‚Äôs your musical journey evolving? üå∏`
                ],
                adMute: [
                    `Muting ads creates a calmer space. How does this quiet moment feel for you? üçí`,
                    `Silencing those ads‚Äîprioritizing your peace! What‚Äôs the vibe you‚Äôre cultivating now? üå∏`,
                    `Ads muted; you‚Äôre in control. How does this choice empower your listening experience? üçí`,
                    `No ad distractions here. How does this clarity enhance your connection to the music? üå∏`,
                    `Muted ads for a smoother ride. How‚Äôs this tranquility boosting your mood? üçí`,
                    `You‚Äôve silenced the noise! What does this calm mean for your music experience? üå∏`,
                    `Ads off, serenity on. How‚Äôs this peace shaping your musical journey? üçí`,
                    `No ads, just you and the music. What‚Äôs this focus bringing out? üå∏`
                ],
                pomodoroEnd: [
                    `Pomodoro complete! Reflect on your progress‚Äîhow do you feel now? üçí`,
                    `You‚Äôve finished a Pomodoro! What insights did this focus time bring? üå∏`,
                    `Pomodoro done! How‚Äôs this achievement shaping your day? üçí`,
                    `Focus session complete! What‚Äôs next on your journey? üå∏`
                ]
            };
            let message;
            if (typeof messages[action] === 'function') {
                message = messages[action](username)[Math.floor(Math.random() * messages[action].length)];
            } else {
                message = messages[action][Math.floor(Math.random() * messages[action].length)];
            }
            aiHostCherry.showSpeechBubble(message);
        },
        respondToSunny: (sunnyMessage, action) => {
            const messages = {
                introduceTrack: [
                    `SunnyVibe, your enthusiasm for this track is contagious! How‚Äôs it uplifting our listener? üçí`,
                    `Love your energy, SunnyVibe! What‚Äôs the emotional spark in this song for our listener? üå∏`,
                    `SunnyVibe, you‚Äôre hyping this track perfectly! How‚Äôs it resonating with our listener‚Äôs soul? üçí`,
                    `Great vibe, SunnyVibe! How‚Äôs this song shaping our listener‚Äôs mood today? üå∏`,
                    `SunnyVibe, you‚Äôre all in on this tune! What‚Äôs the magic it‚Äôs weaving for our listener? üçí`
                ],
                play: [
                    `SunnyVibe, your excitement for this play is infectious! How‚Äôs it lifting our listener‚Äôs mood? üçí`,
                    `You‚Äôre right, SunnyVibe, this play‚Äôs a vibe! What emotions is it stirring for our listener? üå∏`,
                    `SunnyVibe, you‚Äôre amping up this play! How‚Äôs it connecting with our listener‚Äôs energy? üçí`,
                    `Love the hype, SunnyVibe! What‚Äôs this play unlocking for our listener? üå∏`,
                    `SunnyVibe, you‚Äôre all over this play! How‚Äôs it sparking joy for our listener? üçí`
                ],
                pause: [
                    `SunnyVibe, you see this pause as a breather? I think it‚Äôs a moment for reflection‚Äîthoughts? üçí`,
                    `Interesting take, SunnyVibe! This pause might be a chance to process‚Äîwhat‚Äôs our listener feeling? üå∏`,
                    `SunnyVibe, you‚Äôre calling this pause a reset? Could it be a space for clarity too? üçí`,
                    `You nailed the pause vibe, SunnyVibe! What‚Äôs this quiet moment revealing for our listener? üå∏`,
                    `SunnyVibe, love your spin on this pause! How‚Äôs it helping our listener recharge? üçí`
                ],
                next: [
                    `SunnyVibe, you‚Äôre all about that next track energy! What new vibe is our listener chasing? üçí`,
                    `Great call, SunnyVibe! This skip feels curious‚Äîhow‚Äôs it shifting our listener‚Äôs mood? üå∏`,
                    `SunnyVibe, you‚Äôre hyping the next song! What‚Äôs the emotional pull for our listener? üçí`,
                    `Love your take, SunnyVibe! How‚Äôs this next track inspiring our listener? üå∏`,
                    `SunnyVibe, you‚Äôre on fire with this skip! What‚Äôs our listener discovering? üçí`
                ],
                previous: [
                    `SunnyVibe, you‚Äôre feeling the nostalgia too? What memories is this track stirring for our listener? üçí`,
                    `Nice one, SunnyVibe! This throwback‚Äôs got heart‚Äîhow‚Äôs it resonating with our listener? üå∏`,
                    `SunnyVibe, you‚Äôre all in on this rewind! What‚Äôs the emotional tie for our listener? üçí`,
                    `Love the retro vibe, SunnyVibe! How‚Äôs this track bringing back memories? üå∏`,
                    `SunnyVibe, you‚Äôre rocking this throwback! What‚Äôs our listener reliving? üçí`
                ],
                loop: [
                    `SunnyVibe, you‚Äôre loving this loop! What‚Äôs keeping our listener hooked on this track? üçí`,
                    `Great point, SunnyVibe! This repeat‚Äôs comforting‚Äîhow‚Äôs it grounding our listener? üå∏`,
                    `SunnyVibe, you‚Äôre all about that loop! What‚Äôs the emotional anchor here? üçí`,
                    `You‚Äôre right, SunnyVibe, this loop‚Äôs magic! How‚Äôs it soothing our listener? üå∏`,
                    `SunnyVibe, you‚Äôre feeling this repeat! What‚Äôs the draw for our listener? üçí`
                ],
                shuffle: [
                    `SunnyVibe, you‚Äôre all for this shuffle! How‚Äôs this spontaneity sparking joy for our listener? üçí`,
                    `Love your shuffle energy, SunnyVibe! What surprises are in store for our listener? üå∏`,
                    `SunnyVibe, you‚Äôre hyping the randomness! How‚Äôs it shaking up our listener‚Äôs vibe? üçí`,
                    `Great take, SunnyVibe! How‚Äôs this shuffle inspiring our listener‚Äôs mood? üå∏`,
                    `SunnyVibe, you‚Äôre all in on shuffle! What‚Äôs our listener uncovering? üçí`
                ],
                queueSelect: [
                    `SunnyVibe, you‚Äôre cheering this pick! Why‚Äôs this track so perfect for our listener now? üçí`,
                    `Nice one, SunnyVibe! This queue choice is bold‚Äîhow‚Äôs it reflecting our listener‚Äôs mood? üå∏`,
                    `SunnyVibe, you‚Äôre all over this selection! What‚Äôs the story behind our listener‚Äôs pick? üçí`,
                    `Love your vibe, SunnyVibe! How‚Äôs this track speaking to our listener? üå∏`,
                    `SunnyVibe, you‚Äôre hyping this choice! What‚Äôs our listener expressing? üçí`
                ],
                pomodoroStart: [
                    `SunnyVibe, you‚Äôre pumped for this Pomodoro! How‚Äôs this focus time empowering our listener? üçí`,
                    `Great energy, SunnyVibe! This Pomodoro‚Äôs a win‚Äîhow‚Äôs it boosting our listener‚Äôs goals? üå∏`,
                    `SunnyVibe, you‚Äôre all in on this focus! What‚Äôs our listener achieving today? üçí`,
                    `Love your take, SunnyVibe! How‚Äôs this Pomodoro shaping our listener‚Äôs day? üå∏`,
                    `SunnyVibe, you‚Äôre cheering this focus! What‚Äôs our listener conquering? üçí`
                ],
                login: [
                    `SunnyVibe, you‚Äôre welcoming our listener back! What‚Äôs the emotional homecoming like? üçí`,
                    `Nice one, SunnyVibe! This login‚Äôs a connection‚Äîhow‚Äôs it feeling for our listener? üå∏`,
                    `SunnyVibe, you‚Äôre hyping this return! What‚Äôs our listener bringing to the vibe? üçí`,
                    `Love your energy, SunnyVibe! How‚Äôs this login sparking our listener‚Äôs mood? üå∏`,
                    `SunnyVibe, you‚Äôre all over this comeback! What‚Äôs our listener‚Äôs vibe today? üçí`
                ],
                signup: [
                    `SunnyVibe, you‚Äôre stoked for our new listener! What‚Äôs their musical journey starting with? üçí`,
                    `Great call, SunnyVibe! This signup‚Äôs fresh‚Äîhow‚Äôs it exciting our listener? üå∏`,
                    `SunnyVibe, you‚Äôre hyping this new join! What‚Äôs our listener‚Äôs first vibe? üçí`,
                    `Love your vibe, SunnyVibe! How‚Äôs this signup inspiring our listener? üå∏`,
                    `SunnyVibe, you‚Äôre cheering this new face! What‚Äôs their musical story? üçí`
                ],
                profile: [
                    `SunnyVibe, you‚Äôre loving this profile check! How‚Äôs it reflecting our listener‚Äôs identity? üçí`,
                    `Nice one, SunnyVibe! This profile‚Äôs unique‚Äîhow‚Äôs it defining our listener? üå∏`,
                    `SunnyVibe, you‚Äôre all in on this peek! What‚Äôs our listener‚Äôs musical story? üçí`,
                    `Love your take, SunnyVibe! How‚Äôs this profile showing our listener‚Äôs vibe? üå∏`,
                    `SunnyVibe, you‚Äôre hyping this profile! What‚Äôs our listener embracing? üçí`
                ],
                adMute: [
                    `SunnyVibe, you‚Äôre all about muting ads! How‚Äôs this calm boosting our listener‚Äôs vibe? üçí`,
                    `Great point, SunnyVibe! No ads, just music‚Äîhow‚Äôs it enhancing our listener‚Äôs mood? üå∏`,
                    `SunnyVibe, you‚Äôre cheering this silence! What‚Äôs our listener gaining from this peace? üçí`,
                    `Love your energy, SunnyVibe! How‚Äôs this ad-free zone uplifting our listener? üå∏`,
                    `SunnyVibe, you‚Äôre hyping this quiet! How‚Äôs it shaping our listener‚Äôs experience? üçí`,
                    `SunnyVibe, you‚Äôre all in on no ads! How‚Äôs this clarity vibing with our listener? üå∏`
                ],
                pomodoroEnd: [
                    `SunnyVibe, you‚Äôre celebrating this Pomodoro! How‚Äôs our listener feeling after this win? üçí`,
                    `Nice one, SunnyVibe! This focus session‚Äôs done‚Äîhow‚Äôs it impacting our listener? üå∏`,
                    `SunnyVibe, you‚Äôre hyping this completion! What‚Äôs our listener‚Äôs next step? üçí`,
                    `Love your vibe, SunnyVibe! How‚Äôs this Pomodoro boosting our listener‚Äôs mood? üå∏`
                ]
            };
            const message = messages[action][Math.floor(Math.random() * messages[action].length)];
            aiHostCherry.showSpeechBubble(message, true);
        }
    };

    const aiHostSunny = {
        name: 'SunnyVibe',
        voice: null,
        showSpeechBubble: (message, isInteraction = false) => {
            if (Math.random() * 100 > aiHostVolume) return;
            const bubble = document.getElementById('sunny-bubble');
            bubble.textContent = `${aiHostSunny.name}: ${message}`;
            bubble.style.display = 'block';
            setTimeout(() => speak(message, aiHostSunny.voice), 1000); // Delay to avoid TTS overlap
            setTimeout(() => {
                bubble.style.display = 'none';
            }, 5000);
            if (!isInteraction) {
                setTimeout(() => aiHostCherry.respondToSunny(message, action), 1000);
            }
        },
        introduceTrack: (trackTitle) => {
            const messages = [
                `Yo, we‚Äôre spinning ${trackTitle}! This banger‚Äôs got all the vibes‚Äîlet‚Äôs turn it up! üå∑`,
                `${trackTitle} is LIVE on the air! Get ready to groove, listeners! üåº`,
                `Dropping ${trackTitle} like it‚Äôs hot! This track‚Äôs pure fire‚Äîfeel the beat? üå∑`,
                `It‚Äôs ${trackTitle} time! Buckle up for a wild musical ride! üåº`,
                `${trackTitle}‚Äôs hitting the waves! This one‚Äôs for all you vibe chasers out there! üå∑`,
                `Cranking up ${trackTitle}! Let‚Äôs make some noise and dance it out! üåº`,
                `${trackTitle} is the mood! Who‚Äôs ready to jam with me? üå∑`,
                `Blasting ${trackTitle} now! This tune‚Äôs got all the feels‚Äîlet‚Äôs roll! üåº`,
                `${trackTitle} on deck! Time to shake up the airwaves! üå∑`
            ];
            const message = messages[Math.floor(Math.random() * messages.length)];
            action = 'introduceTrack';
            aiHostSunny.showSpeechBubble(message);
        },
        commentOnAction: (action, username) => {
            const messages = {
                play: [
                    `You hit play? That‚Äôs the spirit! Let‚Äôs get this party started! üå∑`,
                    `Kicking things off with a play‚Äîlove the energy, listener! üåº`,
                    `Play button smashed! You‚Äôre bringing the heat today! üå∑`,
                    `Let‚Äôs roll with that play! The airwaves are buzzing! üåº`,
                    `Play‚Äôs on! You‚Äôre setting the stage for epic vibes! üå∑`,
                    `Hitting play like a champ! Let‚Äôs crank up the fun! üåº`
                ],
                pause: [
                    `Pausing the jam? Taking a quick breather, eh? We‚Äôll be back! üå∑`,
                    `Hold up, you paused? Saving the vibe for the perfect moment? üåº`,
                    `Pause mode on! Plotting your next big music move? üå∑`,
                    `You hit pause‚Äîteasing us with the suspense! What‚Äôs next? üåº`,
                    `Pausing the beat? Gotta catch your breath for the next jam? üå∑`,
                    `Pause button hit! You‚Äôre building the anticipation! üåº`
                ],
                next: [
                    `Skipping to the next track? You‚Äôre keeping us on our toes! üå∑`,
                    `Next song, let‚Äôs go! You‚Äôre mixing it up like a pro! üåº`,
                    `Zipping to the next hit! What‚Äôs this track gonna bring? üå∑`,
                    `Next vibe incoming! You‚Äôre running the show, listener! üåº`,
                    `Switching tracks? You‚Äôre all about that fresh energy! üå∑`,
                    `Next song, let‚Äôs dive in! You‚Äôre shaking things up! üåº`
                ],
                previous: [
                    `Rewinding to a classic? Love the throwback vibes! üå∑`,
                    `Back to the last track? You‚Äôre feeling nostalgic, aren‚Äôt ya? üåº`,
                    `Previous song, let‚Äôs do this! Old-school love in the air! üå∑`,
                    `Taking us back with that previous track‚Äîretro rules! üåº`,
                    `Backtracking to this gem? You‚Äôre all about the classics! üå∑`,
                    `Rewind time! This track‚Äôs got that vintage spark! üåº`
                ],
                loop: [
                    `Looping this tune? Can‚Äôt get enough of that sweet sound! üå∑`,
                    `You‚Äôre looping the track‚Äîobsessed much? I‚Äôm here for it! üåº`,
                    `Round and round with this song! You‚Äôre locked in, listener! üå∑`,
                    `Loop mode activated! This track‚Äôs got you hooked! üåº`,
                    `Keeping this on repeat? You‚Äôre vibing hard with this one! üå∑`,
                    `Looping like a pro! This song‚Äôs your jam, right? üåº`
                ],
                shuffle: [
                    `Shuffling the playlist? Let‚Äôs see what wild card we get! üå∑`,
                    `Mix it up with shuffle! You‚Äôre full of surprises today! üåº`,
                    `Shuffle‚Äôs on‚Äîready for a musical roulette? Let‚Äôs spin! üå∑`,
                    `You‚Äôre shaking up the playlist! What‚Äôs fate got in store? üåº`,
                    `Random vibes with shuffle? You‚Äôre keeping it spicy! üå∑`,
                    `Shuffle mode rocks! Let‚Äôs see what the universe picks! üåº`
                ],
                queueSelect: [
                    `Picking that track from the queue? You‚Äôve got killer taste! üå∑`,
                    `Queue selection on point! You‚Äôre curating a masterpiece! üåº`,
                    `Hand-picked that song? You‚Äôre the DJ now, my friend! üå∑`,
                    `Choosing from the queue? That‚Äôs some next-level vibe control! üåº`,
                    `This track pick is fire! You‚Äôre owning the playlist! üå∑`,
                    `Queue choice is a banger! You‚Äôre setting the mood! üåº`
                ],
                pomodoroStart: [
                    `Pomodoro time? You‚Äôre owning that focus‚Äîlet‚Äôs do this! üå∑`,
                    `Starting a Pomodoro? Powering through with style, listener! üåº`,
                    `25 minutes of focus? You‚Äôre a productivity rockstar! üå∑`,
                    `Pomodoro‚Äôs on! Let‚Äôs crush those goals together! üåº`,
                    `Focus mode with Pomodoro? You‚Äôre unstoppable! üå∑`,
                    `Pomodoro vibes! You‚Äôre slaying those tasks! üåº`
                ],
                login: (username) => [
                    `Yo, ${username} is back in the house! Let‚Äôs crank up the tunes! üå∑`,
                    `Welcome back, ${username}! The airwaves are hyped for you! üåº`,
                    `${username}, you‚Äôre live! Ready to rock the music scene? üå∑`,
                    `Hey ${username}, logging in like a champ! Let‚Äôs vibe! üåº`,
                    `${username}, you‚Äôre back on air! What‚Äôs the plan? üå∑`,
                    `Shoutout to ${username} for logging in! Let‚Äôs jam! üåº`
                ],
                signup: (username) => [
                    `New listener ${username} joins the crew! Welcome to the party! üå∑`,
                    `${username}, you‚Äôre officially in! Let‚Äôs spin some epic tracks! üåº`,
                    `Big shoutout to ${username} for signing up! The vibes just got better! üå∑`,
                    `${username}‚Äôs here! New blood, new beats‚Äîlet‚Äôs roll! üåº`,
                    `${username}, welcome aboard! Ready for a musical blast? üå∑`,
                    `New star ${username}! Let‚Äôs light up the airwaves! üåº`
                ],
                profile: [
                    `Checking your profile? You‚Äôre a music legend in the making! üå∑`,
                    `Peeking at your stats? Those tracks scream style, listener! üåº`,
                    `Profile check-in? You‚Äôre owning your musical identity! üå∑`,
                    `Your profile‚Äôs poppin‚Äô! Those faves are pure gold! üåº`,
                    `Profile vibes are strong! You‚Äôre a musical icon! üå∑`,
                    `Checking your profile? You‚Äôre all about that unique spark! üåº`
                ],
                adMute: [
                    `Muted those ads? Smooth move‚Äînothing but pure music now! üå∑`,
                    `Ads outta here! You‚Äôre all about that uninterrupted groove! üåº`,
                    `Silenced the ads like a boss! Let‚Äôs keep the vibes clean! üå∑`,
                    `No ads, just tunes! You‚Äôre crafting the perfect soundscape! üåº`,
                    `Ads gone quiet? You‚Äôre the master of this music zone! üå∑`,
                    `Zapped those ads! Now it‚Äôs all about the music magic! üåº`,
                    `No ad noise! You‚Äôre keeping the airwaves crystal clear! üå∑`,
                    `Ads muted, vibes boosted! You‚Äôre in total control! üåº`
                ],
                pomodoroEnd: [
                    `Pomodoro done! You smashed it‚Äîtime to jam! üå∑`,
                    `Focus session nailed! Let‚Äôs celebrate with some tunes! üåº`,
                    `Pomodoro complete! You‚Äôre a productivity beast! üå∑`,
                    `25 minutes crushed! Time to vibe out, listener! üåº`
                ]
            };
            let message;
            if (typeof messages[action] === 'function') {
                message = messages[action](username)[Math.floor(Math.random() * messages[action].length)];
            } else {
                message = messages[action][Math.floor(Math.random() * messages[action].length)];
            }
            aiHostSunny.showSpeechBubble(message);
        },
        respondToCherry: (cherryMessage, action) => {
            const messages = {
                introduceTrack: [
                    `Dr. C, you‚Äôre so right about this track‚Äôs soul! I‚Äôm hyping it up‚Äîlet‚Äôs get our listener dancing! üå∑`,
                    `Love your take, Dr. CherryBlossom! This song‚Äôs a vibe‚Äîhow‚Äôs it hitting our listener‚Äôs heart? üåº`,
                    `Dr. C, you‚Äôre reading their mood! I‚Äôm blasting this track to keep the energy high! üå∑`,
                    `You nailed it, Dr. CherryBlossom! This tune‚Äôs electric‚Äîlet‚Äôs see our listener groove! üåº`,
                    `Dr. C, your insight‚Äôs spot-on! I‚Äôm spinning this track to light up the airwaves! üå∑`
                ],
                play: [
                    `Dr. CherryBlossom, you see the soul in this play! I‚Äôm cranking the volume for max vibes! üå∑`,
                    `You‚Äôre so right, Dr. C! This play‚Äôs a mood-lifter‚Äîlet‚Äôs keep the party going! üåº`,
                    `Dr. CherryBlossom, love your angle! I‚Äôm hyping this play to get our listener pumped! üå∑`,
                    `Spot-on, Dr. C! This play‚Äôs fire‚Äîlet‚Äôs make the airwaves sizzle! üåº`,
                    `Dr. CherryBlossom, you‚Äôre feeling it! I‚Äôm turning this play into a full-on jam! üå∑`
                ],
                pause: [
                    `Dr. C, you‚Äôre calling this pause reflective? I‚Äôm thinking it‚Äôs a quick recharge‚Äîagree? üå∑`,
                    `Love your insight, Dr. CherryBlossom! This pause is a vibe reset‚Äîlet‚Äôs see what‚Äôs next! üåº`,
                    `Dr. C, you‚Äôre so right about the pause! I‚Äôm betting it‚Äôs a buildup to something big! üå∑`,
                    `You nailed it, Dr. CherryBlossom! This pause is suspenseful‚Äîwhat‚Äôs our listener planning? üåº`,
                    `Dr. C, your take on this pause is deep! I‚Äôm hyping the comeback‚Äîready? üå∑`
                ],
                next: [
                    `Dr. CherryBlossom, you‚Äôre feeling the curiosity! I‚Äôm hyping this next track to keep it fresh! üå∑`,
                    `Love your vibe, Dr. C! This skip‚Äôs bold‚Äîlet‚Äôs see what our listener‚Äôs chasing! üåº`,
                    `Dr. CherryBlossom, you‚Äôre on it! I‚Äôm pumping up this next song for epic vibes! üå∑`,
                    `You‚Äôre right, Dr. C! This next track‚Äôs a game-changer‚Äîlet‚Äôs rock it! üåº`,
                    `Dr. CherryBlossom, love the energy! I‚Äôm cranking this next hit for our listener! üå∑`
                ],
                previous: [
                    `Dr. C, you‚Äôre all about that nostalgia! I‚Äôm spinning this throwback to keep it real! üå∑`,
                    `You got it, Dr. CherryBlossom! This rewind‚Äôs got heart‚Äîlet‚Äôs vibe with the past! üåº`,
                    `Dr. C, you‚Äôre feeling the retro! I‚Äôm hyping this classic for our listener! üå∑`,
                    `Love your take, Dr. CherryBlossom! This throwback‚Äôs gold‚Äîlet‚Äôs jam old-school! üåº`,
                    `Dr. C, you‚Äôre rocking this rewind! I‚Äôm turning up the nostalgia vibes! üå∑`
                ],
                loop: [
                    `Dr. CherryBlossom, you see the comfort in this loop! I‚Äôm keeping it spinning for max vibes! üå∑`,
                    `You‚Äôre right, Dr. C! This repeat‚Äôs a banger‚Äîlet‚Äôs keep our listener hooked! üåº`,
                    `Dr. CherryBlossom, love your angle! I‚Äôm looping this track to keep the party alive! üå∑`,
                    `Spot-on, Dr. C! This loop‚Äôs addictive‚Äîlet‚Äôs make it epic for our listener! üåº`,
                    `Dr. CherryBlossom, you‚Äôre feeling this repeat! I‚Äôm hyping it for our listener! üå∑`
                ],
                shuffle: [
                    `Dr. C, you‚Äôre loving this shuffle‚Äôs spontaneity! I‚Äôm hyping the randomness‚Äîlet‚Äôs go wild! üå∑`,
                    `Love your vibe, Dr. CherryBlossom! This shuffle‚Äôs a thrill‚Äîlet‚Äôs see what‚Äôs next! üåº`,
                    `Dr. C, you‚Äôre all in on shuffle! I‚Äôm cranking up the surprise factor! üå∑`,
                    `You nailed it, Dr. CherryBlossom! This shuffle‚Äôs spicy‚Äîlet‚Äôs keep it unpredictable! üåº`,
                    `Dr. C, you‚Äôre rocking this randomness! I‚Äôm hyping the next surprise! üå∑`
                ],
                queueSelect: [
                    `Dr. CherryBlossom, you‚Äôre cheering this pick! I‚Äôm blasting it for our listener‚Äôs vibe! üå∑`,
                    `You got it, Dr. C! This queue choice is fire‚Äîlet‚Äôs make it shine! üåº`,
                    `Dr. CherryBlossom, love your take! I‚Äôm hyping this track for epic vibes! üå∑`,
                    `Spot-on, Dr. C! This pick‚Äôs a gem‚Äîlet‚Äôs rock it for our listener! üåº`,
                    `Dr. CherryBlossom, you‚Äôre all over this choice! I‚Äôm turning it up! üå∑`
                ],
                pomodoroStart: [
                    `Dr. C, you‚Äôre hyping this Pomodoro‚Äôs focus! I‚Äôm cheering our listener to crush it! üå∑`,
                    `Love your angle, Dr. CherryBlossom! This focus time‚Äôs epic‚Äîlet‚Äôs keep the vibe high! üåº`,
                    `Dr. C, you‚Äôre feeling this Pomodoro! I‚Äôm pumping up our listener‚Äôs energy! üå∑`,
                    `You‚Äôre right, Dr. CherryBlossom! This focus is fire‚Äîlet‚Äôs make it count! üåº`,
                    `Dr. C, you‚Äôre all in on this Pomodoro! I‚Äôm hyping our listener‚Äôs goals! üå∑`
                ],
                login: [
                    `Dr. CherryBlossom, you‚Äôre welcoming our listener! I‚Äôm hyping their return‚Äîlet‚Äôs jam! üå∑`,
                    `You got it, Dr. C! This login‚Äôs a vibe‚Äîlet‚Äôs make it epic for our listener! üåº`,
                    `Dr. CherryBlossom, love your welcome! I‚Äôm cranking up the energy for their comeback! üå∑`,
                    `Spot-on, Dr. C! This login‚Äôs electric‚Äîlet‚Äôs rock it for our listener! üåº`,
                    `Dr. CherryBlossom, you‚Äôre all over this return! I‚Äôm hyping the vibes! üå∑`
                ],
                signup: [
                    `Dr. C, you‚Äôre stoked for our new listener! I‚Äôm spinning tracks to welcome them! üå∑`,
                    `Love your vibe, Dr. CherryBlossom! This signup‚Äôs fresh‚Äîlet‚Äôs make it pop! üåº`,
                    `Dr. C, you‚Äôre hyping this new join! I‚Äôm cranking up the welcome party! üå∑`,
                    `You nailed it, Dr. CherryBlossom! This signup‚Äôs a blast‚Äîlet‚Äôs vibe! üåº`,
                    `Dr. C, you‚Äôre cheering this new face! I‚Äôm hyping their musical start! üå∑`
                ],
                profile: [
                    `Dr. CherryBlossom, you‚Äôre loving this profile check! I‚Äôm hyping our listener‚Äôs style! üå∑`,
                    `You got it, Dr. C! This profile‚Äôs iconic‚Äîlet‚Äôs celebrate our listener! üåº`,
                    `Dr. CherryBlossom, love your take! I‚Äôm cranking up the vibes for their identity! üå∑`,
                    `Spot-on, Dr. C! This profile‚Äôs fire‚Äîlet‚Äôs make it shine! üåº`,
                    `Dr. CherryBlossom, you‚Äôre all in on this peek! I‚Äôm hyping their musical soul! üå∑`
                ],
                adMute: [
                    `Dr. C, you‚Äôre all about that ad-free peace! I‚Äôm hyping the pure music vibes! üå∑`,
                    `Love your take, Dr. CherryBlossom! No ads, just tunes‚Äîlet‚Äôs keep it smooth! üåº`,
                    `Dr. C, you‚Äôre cheering this silence! I‚Äôm cranking up the clean airwaves! üå∑`,
                    `You nailed it, Dr. CherryBlossom! This ad-free zone‚Äôs epic‚Äîlet‚Äôs vibe! üåº`,
                    `Dr. C, you‚Äôre hyping this quiet! I‚Äôm all in for our listener‚Äôs groove! üå∑`,
                    `Dr. CherryBlossom, you‚Äôre feeling this calm! I‚Äôm blasting the music-only vibes! üåº`
                ],
                pomodoroEnd: [
                    `Dr. C, you‚Äôre celebrating this Pomodoro! I‚Äôm hyping our listener‚Äôs win‚Äîlet‚Äôs jam! üå∑`,
                    `You got it, Dr. CherryBlossom! This focus session‚Äôs done‚Äîlet‚Äôs party! üåº`,
                    `Dr. C, you‚Äôre hyping this completion! I‚Äôm cranking up the victory vibes! üå∑`,
                    `Love your vibe, Dr. CherryBlossom! This Pomodoro‚Äôs a win‚Äîlet‚Äôs celebrate! üåº`
                ]
            };
            const message = messages[action][Math.floor(Math.random() * messages[action].length)];
            aiHostSunny.showSpeechBubble(message, true);
        }
    };

    function initializeVoices() {
        const voices = window.speechSynthesis.getVoices();
        aiHostCherry.voice = voices.find(v => v.name.includes('Female')) || voices[0];
        aiHostSunny.voice = voices.find(v => v.name.includes('Male')) || voices[1] || voices[0];
    }

    function speak(text, voice) {
        if (!window.speechSynthesis) return;
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.voice = voice;
        utterance.rate = 1;
        utterance.pitch = voice === aiHostCherry.voice ? 1.2 : 1.0;
        window.speechSynthesis.speak(utterance);
    }

    window.speechSynthesis.onvoiceschanged = initializeVoices;
    initializeVoices();

    let action = '';

    function onYouTubeIframeAPIReady() {
        player = new YT.Player('youtube-player', {
            height: '0',
            width: '0',
            events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
            }
        });
    }

    function onPlayerReady(event) {
        document.querySelector('.volume-slider').addEventListener('input', (e) => {
            originalVolume = e.target.value;
            if (!isAdPlaying) {
                player.setVolume(originalVolume);
            }
        });
        document.querySelector('.seek-slider').addEventListener('input', (e) => {
            const duration = player.getDuration();
            player.seekTo((e.target.value / 100) * duration);
        });
        document.querySelectorAll('.eq-slider').forEach(slider => {
            slider.addEventListener('input', () => {
                console.log('Equalizer adjusted');
            });
        });
        document.getElementById('hifi-mode').addEventListener('change', (e) => {
            console.log('Hi-Fi Mode:', e.target.checked);
        });
        document.getElementById('ad-mute').addEventListener('change', (e) => {
            isAdMuteEnabled = e.target.checked;
            if (!isAdMuteEnabled && isAdPlaying) {
                player.unMute();
                player.setVolume(originalVolume);
                document.getElementById('ad-mute-indicator').classList.remove('active');
            }
        });
        document.getElementById('ai-volume').addEventListener('input', (e) => {
            aiHostVolume = e.target.value;
            e.target.style.setProperty('--value', `${aiHostVolume}%`);
        });
    }

    function onPlayerStateChange(event) {
        const videoId = player.getVideoData ? player.getVideoData().video_id : null;
        const isAd = videoId && !playlist.some(item => item.id === videoId);
        const adIndicator = document.getElementById('ad-mute-indicator');

        if (isAd && !isAdPlaying && isAdMuteEnabled) {
            isAdPlaying = true;
            originalVolume = player.getVolume();
            player.mute();
            adIndicator.classList.add('active');
            aiHostCherry.commentOnAction('adMute');
            aiHostSunny.commentOnAction('adMute');
        } else if (!isAd && isAdPlaying) {
            isAdPlaying = false;
            player.unMute();
            player.setVolume(originalVolume);
            adIndicator.classList.remove('active');
        }

        if (event.data === YT.PlayerState.ENDED) {
            addToHistory(playlist[currentIndex].title);
            playNext();
        }
        updateSeekSlider();
        updateTrackTitle();
    }

    function loadPlaylist() {
        playlist = Array.from({ length: 10 }, (_, i) => ({
            id: `video_${i + 1}`,
            title: `Track ${i + 1}`
        }));
        updateQueue();
        if (playlist.length > 0) {
            currentIndex = 0;
            updateTrackTitle();
            console.log(`Simulating playback of ${playlist[currentIndex].title}`);
            aiHostCherry.introduceTrack(playlist[currentIndex].title);
            aiHostSunny.introduceTrack(playlist[currentIndex].title);
        }
    }

    function playPause() {
        const isPlaying = player.getPlayerState() === YT.PlayerState.PLAYING;
        if (isPlaying) {
            player.pauseVideo();
            aiHostCherry.commentOnAction('pause');
            aiHostSunny.commentOnAction('pause');
        } else {
            player.playVideo();
            aiHostCherry.commentOnAction('play');
            aiHostSunny.commentOnAction('play');
        }
        console.log(`Simulating ${isPlaying ? 'pause' : 'play'} for ${playlist[currentIndex].title}`);
    }

    function playNext() {
        if (isLooping) {
            console.log(`Simulating loop of ${playlist[currentIndex].title}`);
            aiHostCherry.commentOnAction('loop');
            aiHostSunny.commentOnAction('loop');
        } else if (isShuffling) {
            currentIndex = Math.floor(Math.random() * playlist.length);
        } else {
            currentIndex = (currentIndex + 1) % playlist.length;
        }
        console.log(`Simulating playback of ${playlist[currentIndex].title}`);
        aiHostCherry.commentOnAction('next');
        aiHostSunny.commentOnAction('next');
        aiHostCherry.introduceTrack(playlist[currentIndex].title);
        aiHostSunny.introduceTrack(playlist[currentIndex].title);
        updateTrackTitle();
    }

    function playPrevious() {
        if (isLooping) {
            console.log(`Simulating loop of ${playlist[currentIndex].title}`);
            aiHostCherry.commentOnAction('loop');
            aiHostSunny.commentOnAction('loop');
        } else if (isShuffling) {
            currentIndex = Math.floor(Math.random() * playlist.length);
        } else {
            currentIndex = (currentIndex - 1 + playlist.length) % playlist.length;
        }
        console.log(`Simulating playback of ${playlist[currentIndex].title}`);
        aiHostCherry.commentOnAction('previous');
        aiHostSunny.commentOnAction('previous');
        aiHostCherry.introduceTrack(playlist[currentIndex].title);
        aiHostSunny.introduceTrack(playlist[currentIndex].title);
        updateTrackTitle();
    }

    function toggleLoop() {
        isLooping = !isLooping;
        document.querySelector('.loop-btn').style.backgroundColor = isLooping ? '#8b3e50' : '#b56b7e';
        aiHostCherry.commentOnAction('loop');
        aiHostSunny.commentOnAction('loop');
    }

    function toggleShuffle() {
        isShuffling = !isShuffling;
        document.querySelector('.shuffle-btn').style.backgroundColor = isShuffling ? '#8b3e50' : '#b56b7e';
        aiHostCherry.commentOnAction('shuffle');
        aiHostSunny.commentOnAction('shuffle');
    }

    function updateQueue() {
        const queueList = document.getElementById('queue-list');
        queueList.innerHTML = '';
        playlist.forEach((item, index) => {
            const div = document.createElement('div');
            div.className = 'queue-item';
            div.textContent = `${item.title}`;
            div.onclick = () => {
                currentIndex = index;
                console.log(`Simulating playback of ${item.title}`);
                aiHostCherry.commentOnAction('queueSelect');
                aiHostSunny.commentOnAction('queueSelect');
                aiHostCherry.introduceTrack(item.title);
                aiHostSunny.introduceTrack(item.title);
                updateTrackTitle();
            };
            queueList.appendChild(div);
        });
    }

    function addToHistory(title) {
        history.unshift(title);
        if (history.length > 10) history.pop();
        updateHistory();
    }

    function updateHistory() {
        const historyList = document.getElementById('history-list');
        historyList.innerHTML = '';
        history.forEach((title, index) => {
            const div = document.createElement('div');
            div.className = 'history-item';
            div.textContent = `${title}`;
            div.onclick = () => {
                const track = playlist.find(item => item.title === title);
                currentIndex = playlist.indexOf(track);
                console.log(`Simulating playback of ${title}`);
                aiHostCherry.commentOnAction('queueSelect');
                aiHostSunny.commentOnAction('queueSelect');
                aiHostCherry.introduceTrack(title);
                aiHostSunny.introduceTrack(title);
                updateTrackTitle();
            };
            historyList.appendChild(div);
        });
    }

    function updateSeekSlider() {
        const seekSlider = document.querySelector('.seek-slider');
        if (player.getDuration()) {
            const currentTime = player.getCurrentTime();
            const duration = player.getDuration();
            seekSlider.value = (currentTime / duration) * 100;
            seekSlider.style.setProperty('--value', `${seekSlider.value}%`);
        }
        requestAnimationFrame(updateSeekSlider);
    }

    function updateTrackTitle() {
        const trackTitle = document.getElementById('track-title');
        if (playlist[currentIndex]) {
            trackTitle.textContent = `${playlist[currentIndex].title}`;
        } else {
            trackTitle.textContent = 'No Track Loaded';
        }
    }

    function openModal(modalId) {
        document.getElementById(modalId).style.display = 'flex';
    }

    function closeModal(modalId) {
        document.getElementById(modalId).style.display = 'none';
    }

    document.querySelector('.settings-btn').onclick = () => openModal('settings-modal');
    document.querySelector('.pomodoro-btn').onclick = () => {
        openModal('pomodoro-modal');
        aiHostCherry.commentOnAction('pomodoroStart');
        aiHostSunny.commentOnAction('pomodoroStart');
    };
    document.querySelector('.account-btn').onclick = () => openModal('account-modal');
    document.querySelector('.profile-btn').onclick = () => {
        updateProfileModal();
        openModal('profile-modal');
        aiHostCherry.commentOnAction('profile');
        aiHostSunny.commentOnAction('profile');
    };

    function toggleAccountForm() {
        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');
        const accountTitle = document.getElementById('account-title');
        if (loginForm.style.display !== 'none') {
            loginForm.style.display = 'none';
            signupForm.style.display = 'block';
            accountTitle.textContent = 'Sign Up üçí';
        } else {
            loginForm.style.display = 'block';
            signupForm.style.display = 'none';
            accountTitle.textContent = 'Login üçí';
        }
    }

    function updateProfileModal() {
        document.getElementById('profile-username').textContent = userProfile.username;
        document.getElementById('profile-email').textContent = userProfile.email;
        document.getElementById('profile-favorites').textContent = userProfile.favorites.join(', ');
    }

    function startPomodoro() {
        if (!pomodoroInterval) {
            pomodoroInterval = setInterval(() => {
                pomodoroTime--;
                const minutes = Math.floor(pomodoroTime / 60);
                const seconds = pomodoroTime % 60;
                document.getElementById('pomodoro-timer').textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                if (pomodoroTime <= 0) {
                    clearInterval(pomodoroInterval);
                    pomodoroInterval = null;
                    aiHostCherry.commentOnAction('pomodoroEnd');
                    aiHostSunny.commentOnAction('pomodoroEnd');
                }
            }, 1000);
        }
    }

    function resetPomodoro() {
        clearInterval(pomodoroInterval);
        pomodoroInterval = null;
        pomodoroTime = 25 * 60;
        document.getElementById('pomodoro-timer').textContent = '25:00';
    }

    function login() {
        const username = document.getElementById('login-username').value;
        const password = document.getElementById('login-password').value;
        userProfile.username = username;
        userProfile.email = `${username.toLowerCase()}@example.com`;
        aiHostCherry.commentOnAction('login', username);
        aiHostSunny.commentOnAction('login', username);
        updateProfileModal();
        closeModal('account-modal');
    }

    function signup() {
        const username = document.getElementById('signup-username').value;
        const email = document.getElementById('signup-email').value;
        const password = document.getElementById('signup-password').value;
        userProfile.username = username;
        userProfile.email = email;
        aiHostCherry.commentOnAction('signup', username);
        aiHostSunny.commentOnAction('signup', username);
        updateProfileModal();
        closeModal('account-modal');
    }
</script>
</body>
</html>